{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/traffic-padding.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/traffic-padding.test.ts"],"sourcesContent":["/**\n * Tests for Traffic Padding implementation\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\nimport { TrafficPadding, MESSAGE_SIZE_BUCKETS, AdaptivePadding } from '../mesh/traffic-padding';\n\ndescribe('TrafficPadding', () => {\n  let padding: TrafficPadding;\n  \n  beforeEach(() => {\n    padding = new TrafficPadding({ enabled: true });\n  });\n  \n  it('should pad message to bucket size', () => {\n    const message = new Uint8Array(100);\n    const padded = padding.pad(message);\n    \n    expect(padded.bucketSize).toBeGreaterThanOrEqual(100);\n    expect(padded.originalSize).toBe(100);\n    expect(padded.overhead).toBeGreaterThan(0);\n  });\n  \n  it('should unpad message correctly', () => {\n    const original = new Uint8Array([1, 2, 3, 4, 5]);\n    const padded = padding.pad(original);\n    const unpadded = padding.unpad(padded.data);\n    \n    expect(unpadded).toEqual(original);\n  });\n  \n  it('should handle different padding strategies', () => {\n    const message = new Uint8Array(100);\n    \n    // Random padding\n    padding.updateConfig({ strategy: 'random' });\n    const random = padding.pad(message);\n    expect(random.data.length).toBeGreaterThan(message.length);\n    \n    // Zero padding\n    padding.updateConfig({ strategy: 'zero' });\n    const zero = padding.pad(message);\n    expect(zero.data.length).toBeGreaterThan(message.length);\n    \n    // PKCS7 padding\n    padding.updateConfig({ strategy: 'pkcs7' });\n    const pkcs7 = padding.pad(message);\n    expect(pkcs7.data.length).toBeGreaterThan(message.length);\n  });\n  \n  it('should use correct bucket sizes', () => {\n    const sizes = [50, 200, 500, 1500, 3000];\n    \n    for (const size of sizes) {\n      const message = new Uint8Array(size);\n      const padded = padding.pad(message);\n      \n      // Check bucket size is from standard buckets\n      expect(MESSAGE_SIZE_BUCKETS).toContain(padded.bucketSize);\n    }\n  });\n  \n  it('should calculate overhead correctly', () => {\n    const messageSize = 100;\n    const overhead = padding.calculateOverhead(messageSize);\n    \n    expect(overhead.bytes).toBeGreaterThan(0);\n    expect(overhead.percentage).toBeGreaterThan(0);\n  });\n  \n  it('should handle disabled padding', () => {\n    const disabled = new TrafficPadding({ enabled: false });\n    const message = new Uint8Array(100);\n    \n    const padded = disabled.pad(message);\n    expect(padded.data).toEqual(message);\n    expect(padded.overhead).toBe(0);\n  });\n  \n  it('should reject oversized messages', () => {\n    const huge = new Uint8Array(20000);\n    \n    expect(() => padding.pad(huge)).toThrow();\n  });\n  \n  it('should track statistics', () => {\n    const message = new Uint8Array(100);\n    \n    padding.pad(message);\n    \n    const stats = padding.getStats();\n    expect(stats.messagesPadded).toBe(1);\n    expect(stats.averageOverhead).toBeGreaterThan(0);\n  });\n});\n\ndescribe('AdaptivePadding', () => {\n  let adaptive: AdaptivePadding;\n  \n  beforeEach(() => {\n    adaptive = new AdaptivePadding({ enabled: true });\n  });\n  \n  it('should adapt to network conditions', () => {\n    // Low bandwidth\n    adaptive.updateNetworkConditions(100, 50000);\n    const lowConfig = adaptive.getConfig();\n    expect(lowConfig.sizeBuckets.length).toBeLessThan(MESSAGE_SIZE_BUCKETS.length);\n    \n    // High bandwidth\n    adaptive.updateNetworkConditions(10, 2000000);\n    const highConfig = adaptive.getConfig();\n    expect(highConfig.strategy).toBe('random');\n  });\n  \n  it('should decide when to pad', () => {\n    adaptive.updateNetworkConditions(10, 2000000);\n    expect(adaptive.shouldPad(100)).toBe(true);\n    \n    adaptive.updateNetworkConditions(100, 50000);\n    expect(adaptive.shouldPad(50)).toBe(false);\n  });\n});\n"],"version":3}