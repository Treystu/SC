{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/proof-of-work.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/proof-of-work.test.ts"],"sourcesContent":["/**\n * Tests for Proof-of-Work implementation\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\nimport { ProofOfWork, benchmarkPoW, DEFAULT_POW_CONFIG } from '../mesh/proof-of-work';\n\ndescribe('ProofOfWork', () => {\n  let pow: ProofOfWork;\n  const testMessage = new Uint8Array([1, 2, 3, 4, 5]);\n  \n  beforeEach(() => {\n    pow = new ProofOfWork({ enabled: true, maxComputeTime: 10000 });\n  });\n  \n  it('should compute valid PoW', async () => {\n    const challenge = await pow.computePoW(testMessage, 8);\n    \n    expect(challenge).not.toBeNull();\n    expect(challenge!.difficulty).toBe(8);\n    expect(challenge!.nonce).toBeGreaterThanOrEqual(0);\n  });\n  \n  it('should verify valid PoW', async () => {\n    const challenge = await pow.computePoW(testMessage, 8);\n    expect(challenge).not.toBeNull();\n    \n    const isValid = pow.verifyPoW(testMessage, challenge!, 8);\n    expect(isValid).toBe(true);\n  });\n  \n  it('should reject invalid PoW', async () => {\n    const challenge = await pow.computePoW(testMessage, 8);\n    expect(challenge).not.toBeNull();\n    \n    // Modify nonce\n    challenge!.nonce += 1;\n    \n    const isValid = pow.verifyPoW(testMessage, challenge!, 8);\n    expect(isValid).toBe(false);\n  });\n  \n  it('should handle difficulty levels', async () => {\n    // Low difficulty should be fast\n    const easy = await pow.computePoW(testMessage, 4);\n    expect(easy).not.toBeNull();\n    \n    // Higher difficulty should take longer\n    const hard = await pow.computePoW(testMessage, 12);\n    expect(hard).not.toBeNull();\n  });\n  \n  it('should respect peer exemptions', () => {\n    const peerId = 'trusted-peer-123';\n    \n    expect(pow.isPeerExempt(peerId)).toBe(false);\n    \n    pow.exemptPeer(peerId);\n    expect(pow.isPeerExempt(peerId)).toBe(true);\n    \n    pow.unexemptPeer(peerId);\n    expect(pow.isPeerExempt(peerId)).toBe(false);\n  });\n  \n  it('should handle adaptive difficulty', () => {\n    const initialDifficulty = pow.getConfig().defaultDifficulty;\n    \n    pow.increaseDifficulty(2);\n    expect(pow.getConfig().defaultDifficulty).toBe(initialDifficulty + 2);\n    \n    pow.decreaseDifficulty(1);\n    expect(pow.getConfig().defaultDifficulty).toBe(initialDifficulty + 1);\n  });\n  \n  it('should track statistics', async () => {\n    await pow.computePoW(testMessage, 8);\n    \n    const stats = pow.getStats();\n    expect(stats.computeAttempts).toBeGreaterThan(0);\n    expect(stats.computeSuccesses).toBeGreaterThan(0);\n  });\n  \n  it('should handle disabled PoW', async () => {\n    const disabledPoW = new ProofOfWork({ enabled: false });\n    \n    const challenge = await disabledPoW.computePoW(testMessage, 8);\n    expect(challenge).not.toBeNull();\n    expect(challenge!.difficulty).toBe(0);\n    \n    const isValid = disabledPoW.verifyPoW(testMessage, challenge!, 8);\n    expect(isValid).toBe(true);\n  });\n});\n"],"version":3}