{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/discovery/peer.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/discovery/peer.ts"],"sourcesContent":["/**\n * Peer Discovery Mechanisms\n * No central servers - all peer-to-peer discovery\n */\n\nexport interface PeerInfo {\n  publicKey: Uint8Array;\n  peerId: string;\n  endpoints: PeerEndpoint[];\n  displayName?: string;\n  timestamp: number;\n}\n\nexport interface PeerEndpoint {\n  type: 'webrtc' | 'bluetooth' | 'local' | 'manual';\n  address?: string; // IP:port for manual/local\n  signaling?: string; // Signaling peer ID for WebRTC\n  rssi?: number; // Signal strength for BLE\n}\n\n/**\n * QR Code Identity Exchange\n * Encode public key + connection info as QR code\n */\nexport class QRCodeDiscovery {\n  /**\n   * Generate QR code data for identity\n   */\n  static generateQRData(peerInfo: PeerInfo): string {\n    const data = {\n      v: 1, // Version\n      pk: Array.from(peerInfo.publicKey).map(b => b.toString(16).padStart(2, '0')).join(''),\n      id: peerInfo.peerId,\n      name: peerInfo.displayName || '',\n      endpoints: peerInfo.endpoints.map(ep => ({\n        t: ep.type,\n        a: ep.address,\n        s: ep.signaling,\n      })),\n      ts: peerInfo.timestamp,\n    };\n\n    // Encode as base64 URL\n    const json = JSON.stringify(data);\n    if (typeof btoa !== 'undefined') {\n      return `sc://${btoa(json)}`;\n    }\n    // Node.js - use global Buffer\n    const buffer = (globalThis as any).Buffer;\n    if (buffer) {\n      return `sc://${buffer.from(json).toString('base64')}`;\n    }\n    // Fallback - return JSON (not ideal for QR)\n    return `sc://${json}`;\n  }\n\n  /**\n   * Parse QR code data\n   */\n  static parseQRData(qrData: string): PeerInfo | null {\n    try {\n      // Remove sc:// prefix\n      const base64Data = qrData.replace('sc://', '');\n      \n      let json: string;\n      if (typeof atob !== 'undefined') {\n        json = atob(base64Data);\n      } else {\n        // Node.js - use global Buffer\n        const buffer = (globalThis as any).Buffer;\n        if (buffer) {\n          json = buffer.from(base64Data, 'base64').toString('utf-8');\n        } else {\n          // Fallback\n          json = base64Data;\n        }\n      }\n\n      const data = JSON.parse(json);\n\n      // Validate version\n      if (data.v !== 1) {\n        return null;\n      }\n\n      // Parse public key\n      const publicKey = new Uint8Array(\n        data.pk.match(/.{1,2}/g).map((byte: string) => parseInt(byte, 16))\n      );\n\n      return {\n        publicKey,\n        peerId: data.id,\n        displayName: data.name || undefined,\n        endpoints: data.endpoints.map((ep: any) => ({\n          type: ep.t,\n          address: ep.a,\n          signaling: ep.s,\n        })),\n        timestamp: data.ts,\n      };\n    } catch (error) {\n      console.error('Failed to parse QR code:', error);\n      return null;\n    }\n  }\n}\n\n/**\n * Manual IP:Port Peer Entry\n */\nexport class ManualDiscovery {\n  /**\n   * Parse manual peer entry\n   * Format: peer_id@ip:port or ip:port\n   */\n  static parseManualEntry(entry: string): PeerEndpoint | null {\n    try {\n      // Format: peer_id@ip:port\n      const parts = entry.split('@');\n      let address: string;\n      let _peerId: string | undefined;\n\n      if (parts.length === 2) {\n        _peerId = parts[0];\n        address = parts[1];\n      } else {\n        address = entry;\n      }\n\n      // Validate IP:port format\n      const addressParts = address.split(':');\n      if (addressParts.length !== 2) {\n        return null;\n      }\n\n      const _ip = addressParts[0];\n      const port = parseInt(addressParts[1], 10);\n\n      // Basic validation\n      if (isNaN(port) || port < 1 || port > 65535) {\n        return null;\n      }\n\n      return {\n        type: 'manual',\n        address,\n      };\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * Format peer info for manual entry\n   */\n  static formatManualEntry(peerId: string, address: string): string {\n    return `${peerId}@${address}`;\n  }\n}\n\n/**\n * Peer Announcement Broadcast\n * Broadcast peer existence through mesh\n */\nexport class PeerAnnouncement {\n  /**\n   * Create peer announcement message payload\n   */\n  static createAnnouncement(peerInfo: PeerInfo): Uint8Array {\n    const data = {\n      publicKey: Array.from(peerInfo.publicKey).map(b => b.toString(16).padStart(2, '0')).join(''),\n      peerId: peerInfo.peerId,\n      displayName: peerInfo.displayName,\n      endpoints: peerInfo.endpoints,\n      timestamp: Date.now(),\n    };\n\n    return new TextEncoder().encode(JSON.stringify(data));\n  }\n\n  /**\n   * Parse peer announcement payload\n   */\n  static parseAnnouncement(payload: Uint8Array): PeerInfo | null {\n    try {\n      const json = new TextDecoder().decode(payload);\n      const data = JSON.parse(json);\n\n      const publicKey = new Uint8Array(\n        data.publicKey.match(/.{1,2}/g).map((byte: string) => parseInt(byte, 16))\n      );\n\n      return {\n        publicKey,\n        peerId: data.peerId,\n        displayName: data.displayName,\n        endpoints: data.endpoints,\n        timestamp: data.timestamp,\n      };\n    } catch (error) {\n      return null;\n    }\n  }\n}\n\n/**\n * Peer Introduction Relay\n * A tells B about C's existence\n */\nexport class PeerIntroduction {\n  /**\n   * Create peer introduction message\n   */\n  static createIntroduction(introducedPeer: PeerInfo, introducerPeerId: string): Uint8Array {\n    const data = {\n      introducerPeerId,\n      peer: {\n        publicKey: Array.from(introducedPeer.publicKey).map(b => b.toString(16).padStart(2, '0')).join(''),\n        peerId: introducedPeer.peerId,\n        displayName: introducedPeer.displayName,\n        endpoints: introducedPeer.endpoints,\n      },\n      timestamp: Date.now(),\n    };\n\n    return new TextEncoder().encode(JSON.stringify(data));\n  }\n\n  /**\n   * Parse peer introduction message\n   */\n  static parseIntroduction(payload: Uint8Array): { introducerPeerId: string; peer: PeerInfo } | null {\n    try {\n      const json = new TextDecoder().decode(payload);\n      const data = JSON.parse(json);\n\n      const publicKey = new Uint8Array(\n        data.peer.publicKey.match(/.{1,2}/g).map((byte: string) => parseInt(byte, 16))\n      );\n\n      return {\n        introducerPeerId: data.introducerPeerId,\n        peer: {\n          publicKey,\n          peerId: data.peer.peerId,\n          displayName: data.peer.displayName,\n          endpoints: data.peer.endpoints,\n          timestamp: data.timestamp,\n        },\n      };\n    } catch (error) {\n      return null;\n    }\n  }\n}\n\n/**\n * Peer Reachability Verification\n */\nexport class PeerReachability {\n  private reachabilityTests: Map<string, {\n    timestamp: number;\n    attempts: number;\n    lastSuccess: number;\n  }> = new Map();\n\n  /**\n   * Test if peer is reachable\n   */\n  async testReachability(peerId: string, onSendPing: (peerId: string) => Promise<boolean>): Promise<boolean> {\n    const test = this.reachabilityTests.get(peerId) || {\n      timestamp: Date.now(),\n      attempts: 0,\n      lastSuccess: 0,\n    };\n\n    test.attempts++;\n    test.timestamp = Date.now();\n\n    try {\n      const reachable = await onSendPing(peerId);\n      if (reachable) {\n        test.lastSuccess = Date.now();\n      }\n      this.reachabilityTests.set(peerId, test);\n      return reachable;\n    } catch (error) {\n      this.reachabilityTests.set(peerId, test);\n      return false;\n    }\n  }\n\n  /**\n   * Get reachability status\n   */\n  getReachabilityStatus(peerId: string): 'reachable' | 'unreachable' | 'unknown' {\n    const test = this.reachabilityTests.get(peerId);\n    if (!test) {\n      return 'unknown';\n    }\n\n    const timeSinceSuccess = Date.now() - test.lastSuccess;\n    if (timeSinceSuccess < 60000) { // 1 minute\n      return 'reachable';\n    } else if (test.attempts > 3) {\n      return 'unreachable';\n    }\n\n    return 'unknown';\n  }\n\n  /**\n   * Clear reachability test for peer\n   */\n  clearReachability(peerId: string): void {\n    this.reachabilityTests.delete(peerId);\n  }\n}\n"],"version":3}