{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/priority-queue-advanced.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/mesh/priority-queue-advanced.test.ts"],"sourcesContent":["import { MessageQueue } from './routing';\nimport { MessageType } from '../protocol/message';\n\ndescribe('Advanced Message Priority Queue', () => {\n  let queue: MessageQueue;\n\n  beforeEach(() => {\n    queue = new MessageQueue();\n  });\n\n  describe('Priority Escalation', () => {\n    it('should not escalate recent messages', () => {\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file1' });\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.CONTROL_PING, { data: 'ping1' });\n\n      // Control message should come first\n      const first = queue.dequeue();\n      expect(first.data).toBe('ping1');\n    });\n\n    it('should track message age', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      \n      // Wait a bit\n      setTimeout(() => {\n        const age = queue.getOldestMessageAge();\n        expect(age).toBeGreaterThan(0);\n      }, 100);\n    });\n\n    it('should provide size by priority level', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.TEXT, { data: 'text2' });\n      queue.enqueue(MessageType.VOICE, { data: 'voice1' });\n      queue.enqueue(MessageType.CONTROL_PING, { data: 'ping1' });\n\n      const sizes = queue.getSizeByPriority();\n      expect(sizes.get(MessageType.TEXT)).toBe(2);\n      expect(sizes.get(MessageType.VOICE)).toBe(1);\n      expect(sizes.get(MessageType.CONTROL_PING)).toBe(1);\n    });\n  });\n\n  describe('Starvation Prevention', () => {\n    it('should eventually process low-priority messages', (done) => {\n      // Add low-priority message\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file1', timestamp: Date.now() - 35000 });\n      \n      // Add many high-priority messages\n      for (let i = 0; i < 10; i++) {\n        queue.enqueue(MessageType.CONTROL_PING, { data: `ping${i}` });\n      }\n\n      // Process some messages\n      for (let i = 0; i < 5; i++) {\n        queue.dequeue();\n      }\n\n      // Trigger starvation prevention check by waiting\n      setTimeout(() => {\n        // After escalation, file message might be promoted\n        const sizes = queue.getSizeByPriority();\n        // Verify queue is still managing priorities\n        expect(queue.size()).toBeGreaterThan(0);\n        done();\n      }, 100);\n    });\n\n    it('should maintain original priority tracking', () => {\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file1' });\n      const size = queue.size();\n      expect(size).toBe(1);\n    });\n  });\n\n  describe('Queue Statistics', () => {\n    it('should track total queue size', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.VOICE, { data: 'voice1' });\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file1' });\n\n      expect(queue.size()).toBe(3);\n    });\n\n    it('should track sizes by priority', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.TEXT, { data: 'text2' });\n      queue.enqueue(MessageType.TEXT, { data: 'text3' });\n      queue.enqueue(MessageType.VOICE, { data: 'voice1' });\n\n      const sizes = queue.getSizeByPriority();\n      expect(sizes.get(MessageType.TEXT)).toBe(3);\n      expect(sizes.get(MessageType.VOICE)).toBe(1);\n    });\n\n    it('should update size after dequeue', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.TEXT, { data: 'text2' });\n\n      expect(queue.size()).toBe(2);\n      \n      queue.dequeue();\n      expect(queue.size()).toBe(1);\n      \n      queue.dequeue();\n      expect(queue.size()).toBe(0);\n    });\n\n    it('should clear all messages', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.enqueue(MessageType.VOICE, { data: 'voice1' });\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file1' });\n\n      expect(queue.size()).toBe(3);\n      \n      queue.clear();\n      expect(queue.size()).toBe(0);\n    });\n  });\n\n  describe('Priority Order', () => {\n    it('should respect priority order: CONTROL > VOICE > TEXT > FILE', () => {\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'file' });\n      queue.enqueue(MessageType.TEXT, { data: 'text' });\n      queue.enqueue(MessageType.VOICE, { data: 'voice' });\n      queue.enqueue(MessageType.CONTROL_PING, { data: 'ping' });\n\n      expect(queue.dequeue().data).toBe('ping');\n      expect(queue.dequeue().data).toBe('voice');\n      expect(queue.dequeue().data).toBe('text');\n      expect(queue.dequeue().data).toBe('file');\n    });\n\n    it('should handle multiple control message types', () => {\n      queue.enqueue(MessageType.CONTROL_ACK, { data: 'ack' });\n      queue.enqueue(MessageType.CONTROL_PONG, { data: 'pong' });\n      queue.enqueue(MessageType.CONTROL_PING, { data: 'ping' });\n\n      // All are control messages, should be FIFO within same priority\n      const first = queue.dequeue();\n      expect(['ack', 'pong', 'ping']).toContain(first.data);\n    });\n\n    it('should handle FILE_METADATA and FILE_CHUNK', () => {\n      queue.enqueue(MessageType.FILE_CHUNK, { data: 'chunk' });\n      queue.enqueue(MessageType.FILE_METADATA, { data: 'metadata' });\n      queue.enqueue(MessageType.TEXT, { data: 'text' });\n\n      expect(queue.dequeue().data).toBe('text'); // Higher priority\n      \n      const next = queue.dequeue();\n      expect(['chunk', 'metadata']).toContain(next.data);\n    });\n  });\n\n  describe('FIFO within Priority', () => {\n    it('should maintain FIFO order within same priority', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1', order: 1 });\n      queue.enqueue(MessageType.TEXT, { data: 'text2', order: 2 });\n      queue.enqueue(MessageType.TEXT, { data: 'text3', order: 3 });\n\n      expect(queue.dequeue().order).toBe(1);\n      expect(queue.dequeue().order).toBe(2);\n      expect(queue.dequeue().order).toBe(3);\n    });\n  });\n\n  describe('Empty Queue Handling', () => {\n    it('should return null when empty', () => {\n      expect(queue.dequeue()).toBeNull();\n    });\n\n    it('should return null after all messages dequeued', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      queue.dequeue();\n      \n      expect(queue.dequeue()).toBeNull();\n    });\n\n    it('should handle alternating enqueue/dequeue', () => {\n      queue.enqueue(MessageType.TEXT, { data: 'text1' });\n      expect(queue.dequeue().data).toBe('text1');\n      \n      queue.enqueue(MessageType.TEXT, { data: 'text2' });\n      expect(queue.dequeue().data).toBe('text2');\n      \n      expect(queue.dequeue()).toBeNull();\n    });\n  });\n});\n"],"version":3}