{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/protocol/message.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/protocol/message.test.ts"],"sourcesContent":["import {\n  MessageType,\n  encodeHeader,\n  decodeHeader,\n  encodeMessage,\n  decodeMessage,\n  messageHash,\n  PROTOCOL_VERSION,\n  MessageValidationError,\n  validateHeader,\n  validateMessage,\n  isVersionSupported,\n  getMessageTypeName,\n  MAX_PAYLOAD_SIZE,\n  MAX_TTL,\n} from '../protocol/message';\n\ndescribe('Message Protocol', () => {\n  const mockSenderId = new Uint8Array(32).fill(1);\n  const mockSignature = new Uint8Array(64).fill(2); // Ed25519 signatures are 64 bytes\n\n  describe('Header Encoding/Decoding', () => {\n    it('should encode and decode headers correctly', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      const encoded = encodeHeader(header);\n      const decoded = decodeHeader(encoded);\n\n      expect(decoded.version).toBe(header.version);\n      expect(decoded.type).toBe(header.type);\n      expect(decoded.ttl).toBe(header.ttl);\n      expect(decoded.timestamp).toBe(header.timestamp);\n      expect(decoded.senderId).toEqual(header.senderId);\n      expect(decoded.signature).toEqual(header.signature);\n    });\n\n    it('should handle different message types', () => {\n      const types = [\n        MessageType.TEXT,\n        MessageType.FILE_METADATA,\n        MessageType.VOICE,\n        MessageType.CONTROL_PING,\n        MessageType.PEER_DISCOVERY,\n      ];\n\n      types.forEach(type => {\n        const header = {\n          version: PROTOCOL_VERSION,\n          type,\n          ttl: 5,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        };\n\n        const encoded = encodeHeader(header);\n        const decoded = decodeHeader(encoded);\n\n        expect(decoded.type).toBe(type);\n      });\n    });\n\n    it('should handle timestamps correctly', () => {\n      const timestamps = [0, 1000, Date.now(), Number.MAX_SAFE_INTEGER];\n\n      timestamps.forEach(timestamp => {\n        const header = {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp,\n          senderId: mockSenderId,\n          signature: mockSignature,\n        };\n\n        const encoded = encodeHeader(header);\n        const decoded = decodeHeader(encoded);\n\n        expect(decoded.timestamp).toBe(timestamp);\n      });\n    });\n\n    it('should throw on invalid header size', () => {\n      const tooSmall = new Uint8Array(50);\n      expect(() => decodeHeader(tooSmall)).toThrow();\n    });\n  });\n\n  describe('Message Encoding/Decoding', () => {\n    it('should encode and decode complete messages', () => {\n      const payload = new TextEncoder().encode('Hello, mesh!');\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload,\n      };\n\n      const encoded = encodeMessage(message);\n      const decoded = decodeMessage(encoded);\n\n      expect(decoded.header.version).toBe(message.header.version);\n      expect(decoded.header.type).toBe(message.header.type);\n      expect(decoded.payload).toEqual(message.payload);\n    });\n\n    it('should handle empty payloads', () => {\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.CONTROL_PING,\n          ttl: 10,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new Uint8Array(0),\n      };\n\n      const encoded = encodeMessage(message);\n      const decoded = decodeMessage(encoded);\n\n      expect(decoded.payload.length).toBe(0);\n    });\n\n    it('should handle large payloads', () => {\n      const largePayload = new Uint8Array(10000).fill(42);\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.FILE_CHUNK,\n          ttl: 5,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: largePayload,\n      };\n\n      const encoded = encodeMessage(message);\n      const decoded = decodeMessage(encoded);\n\n      expect(decoded.payload).toEqual(largePayload);\n    });\n  });\n\n  describe('Message Hashing', () => {\n    it('should generate consistent hashes', () => {\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: 12345,\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new TextEncoder().encode('test'),\n      };\n\n      const hash1 = messageHash(message);\n      const hash2 = messageHash(message);\n\n      expect(hash1).toBe(hash2);\n    });\n\n    it('should generate different hashes for different messages', () => {\n      const message1 = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: 12345,\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new TextEncoder().encode('test1'),\n      };\n\n      const message2 = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: 12345,\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new TextEncoder().encode('test2'),\n      };\n\n      const hash1 = messageHash(message1);\n      const hash2 = messageHash(message2);\n\n      expect(hash1).not.toBe(hash2);\n    });\n  });\n\n  describe('Message Validation', () => {\n    it('should validate correct headers', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).not.toThrow();\n    });\n\n    it('should reject invalid version', () => {\n      const header = {\n        version: 0xFF,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/version/i);\n    });\n\n    it('should reject invalid message type', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: 0xFF,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/type/i);\n    });\n\n    it('should reject invalid TTL', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: MAX_TTL + 1,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/TTL/i);\n    });\n\n    it('should reject invalid timestamp', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: -1,\n        senderId: mockSenderId,\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/timestamp/i);\n    });\n\n    it('should reject invalid sender ID length', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: new Uint8Array(16), // Wrong size\n        signature: mockSignature,\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/sender ID/i);\n    });\n\n    it('should reject invalid signature length', () => {\n      const header = {\n        version: PROTOCOL_VERSION,\n        type: MessageType.TEXT,\n        ttl: 10,\n        timestamp: Date.now(),\n        senderId: mockSenderId,\n        signature: new Uint8Array(32), // Wrong size\n      };\n\n      expect(() => validateHeader(header)).toThrow(MessageValidationError);\n      expect(() => validateHeader(header)).toThrow(/signature/i);\n    });\n\n    it('should reject payload too large', () => {\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new Uint8Array(MAX_PAYLOAD_SIZE + 1),\n      };\n\n      expect(() => validateMessage(message)).toThrow(MessageValidationError);\n      expect(() => validateMessage(message)).toThrow(/too large/i);\n    });\n\n    it('should accept maximum payload size', () => {\n      const message = {\n        header: {\n          version: PROTOCOL_VERSION,\n          type: MessageType.TEXT,\n          ttl: 10,\n          timestamp: Date.now(),\n          senderId: mockSenderId,\n          signature: mockSignature,\n        },\n        payload: new Uint8Array(MAX_PAYLOAD_SIZE),\n      };\n\n      expect(() => validateMessage(message)).not.toThrow();\n    });\n  });\n\n  describe('Version Support', () => {\n    it('should recognize supported versions', () => {\n      expect(isVersionSupported(0x01)).toBe(true);\n    });\n\n    it('should reject unsupported versions', () => {\n      expect(isVersionSupported(0x00)).toBe(false);\n      expect(isVersionSupported(0xFF)).toBe(false);\n    });\n  });\n\n  describe('Message Type Names', () => {\n    it('should return correct names for known types', () => {\n      expect(getMessageTypeName(MessageType.TEXT)).toBe('TEXT');\n      expect(getMessageTypeName(MessageType.CONTROL_PING)).toBe('CONTROL_PING');\n      expect(getMessageTypeName(MessageType.KEY_EXCHANGE)).toBe('KEY_EXCHANGE');\n    });\n\n    it('should handle unknown types', () => {\n      const unknownType = 0xFF;\n      const name = getMessageTypeName(unknownType);\n      expect(name).toContain('UNKNOWN');\n      expect(name).toContain('ff');\n    });\n  });\n\n  describe('Fuzzing Tests', () => {\n    it('should handle random malformed headers', () => {\n      for (let i = 0; i < 100; i++) {\n        const randomBuffer = new Uint8Array(Math.floor(Math.random() * 200));\n        crypto.getRandomValues(randomBuffer);\n        \n        // Should either decode successfully or throw validation error\n        try {\n          const decoded = decodeHeader(randomBuffer);\n          // If it decoded, validate should catch issues\n          if (randomBuffer.length >= 109) {\n            // May pass or fail validation depending on random data\n            try {\n              validateHeader(decoded);\n            } catch (e) {\n              expect(e).toBeInstanceOf(MessageValidationError);\n            }\n          }\n        } catch (e) {\n          expect(e).toBeInstanceOf(MessageValidationError);\n        }\n      }\n    });\n\n    it('should handle random malformed messages', () => {\n      for (let i = 0; i < 100; i++) {\n        const randomBuffer = new Uint8Array(Math.floor(Math.random() * 2000));\n        crypto.getRandomValues(randomBuffer);\n        \n        try {\n          const decoded = decodeMessage(randomBuffer);\n          // Validation should catch issues in random data\n          try {\n            validateMessage(decoded);\n          } catch (e) {\n            expect(e).toBeInstanceOf(MessageValidationError);\n          }\n        } catch (e) {\n          expect(e).toBeInstanceOf(MessageValidationError);\n        }\n      }\n    });\n  });\n});\n"],"version":3}