{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/identity-manager.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/identity-manager.test.ts"],"sourcesContent":["import { describe, it, expect, beforeEach, jest } from '@jest/globals';\nimport { IdentityManager, type Identity } from './identity-manager';\n\n// Mock localStorage for Node.js environment\nconst localStorageMock = (() => {\n  let store: { [key: string]: string } = {};\n  return {\n    getItem: (key: string) => store[key] || null,\n    setItem: (key: string, value: string) => { store[key] = value; },\n    removeItem: (key: string) => { delete store[key]; },\n    clear: () => { store = {}; }\n  };\n})();\n\nglobal.localStorage = localStorageMock as any;\n\ndescribe('IdentityManager', () => {\n  let manager: IdentityManager;\n\n  beforeEach(() => {\n    localStorage.clear();\n    manager = new IdentityManager();\n  });\n\n  describe('Identity Generation', () => {\n    it('should generate new identity', async () => {\n      const identity = await manager.generateIdentity();\n\n      expect(identity).toBeDefined();\n      expect(identity.id).toBeDefined();\n      expect(identity.publicKey).toBeDefined();\n      expect(identity.privateKey).toBeDefined();\n      expect(identity.created).toBeInstanceOf(Date);\n    });\n\n    it('should generate identity with display name', async () => {\n      const identity = await manager.generateIdentity('Alice');\n\n      expect(identity.displayName).toBe('Alice');\n    });\n\n    it('should generate unique IDs', async () => {\n      const identity1 = await manager.generateIdentity();\n      const manager2 = new IdentityManager();\n      const identity2 = await manager2.generateIdentity();\n\n      expect(identity1.id).not.toBe(identity2.id);\n    });\n\n    it('should use Ed25519 keys', async () => {\n      const identity = await manager.generateIdentity();\n\n      expect(identity.publicKey.algorithm.name).toBe('Ed25519');\n      expect(identity.privateKey.algorithm.name).toBe('Ed25519');\n    });\n  });\n\n  describe('Identity Persistence', () => {\n    it('should save identity to storage', async () => {\n      const identity = await manager.generateIdentity('Bob');\n      // generateIdentity automatically saves, so we just need to load it back\n\n      const loaded = await manager.loadIdentity();\n      expect(loaded).toBeDefined();\n      expect(loaded?.id).toBe(identity.id);\n    });\n\n    it('should load identity from storage', async () => {\n      await manager.generateIdentity('Charlie');\n      // generateIdentity automatically saves\n\n      const newManager = new IdentityManager();\n      const loaded = await newManager.loadIdentity();\n\n      expect(loaded).toBeDefined();\n      expect(loaded?.displayName).toBe('Charlie');\n    });\n\n    it('should return null when no identity exists', async () => {\n      const loaded = await manager.loadIdentity();\n      expect(loaded).toBeNull();\n    });\n\n    it('should delete identity from storage', async () => {\n      await manager.generateIdentity();\n      // generateIdentity automatically saves\n      await manager.deleteIdentity();\n\n      const loaded = await manager.loadIdentity();\n      expect(loaded).toBeNull();\n    });\n  });\n\n  describe('Identity Export/Import', () => {\n    it('should export identity to JWK format', async () => {\n      const identity = await manager.generateIdentity('Dave');\n      const exported = await manager.exportIdentity();\n\n      expect(exported).toBeDefined();\n      expect(exported.id).toBe(identity.id);\n      expect(exported.publicKeyJwk).toBeDefined();\n      expect(exported.privateKeyJwk).toBeDefined();\n      expect(exported.displayName).toBe('Dave');\n    });\n\n    it('should import identity from JWK format', async () => {\n      const original = await manager.generateIdentity('Eve');\n      const exported = await manager.exportIdentity();\n\n      const newManager = new IdentityManager();\n      const imported = await newManager.importIdentity(exported);\n\n      expect(imported.id).toBe(original.id);\n      expect(imported.displayName).toBe(original.displayName);\n    });\n\n    it('should preserve key material on export/import', async () => {\n      await manager.generateIdentity();\n      const exported = await manager.exportIdentity();\n\n      const newManager = new IdentityManager();\n      const imported = await newManager.importIdentity(exported);\n\n      // Verify keys can still be used for signing\n      const data = new Uint8Array([1, 2, 3]);\n      const signature = await crypto.subtle.sign(\n        'Ed25519',\n        imported.privateKey,\n        data\n      );\n\n      const verified = await crypto.subtle.verify(\n        'Ed25519',\n        imported.publicKey,\n        signature,\n        data\n      );\n\n      expect(verified).toBe(true);\n    });\n  });\n\n  describe('Public Key Operations', () => {\n    it('should get public key', async () => {\n      await manager.generateIdentity();\n      const publicKey = await manager.getPublicKey();\n\n      expect(publicKey).toBeDefined();\n      expect(publicKey.type).toBe('public');\n    });\n\n    it('should export public key as bytes', async () => {\n      await manager.generateIdentity();\n      const publicKeyBytes = await manager.getPublicKeyBytes();\n\n      expect(publicKeyBytes).toBeInstanceOf(Uint8Array);\n      expect(publicKeyBytes.length).toBeGreaterThan(0);\n    });\n\n    it('should export public key as hex string', async () => {\n      await manager.generateIdentity();\n      const publicKeyHex = await manager.getPublicKeyHex();\n\n      expect(typeof publicKeyHex).toBe('string');\n      expect(publicKeyHex.length).toBeGreaterThan(0);\n      expect(/^[0-9a-f]+$/i.test(publicKeyHex)).toBe(true);\n    });\n  });\n\n  describe('Identity Verification', () => {\n    it('should verify identity has keys', async () => {\n      await manager.generateIdentity();\n      const hasIdentity = manager.hasIdentity();\n\n      expect(hasIdentity).toBe(true);\n    });\n\n    it('should return false when no identity', () => {\n      const hasIdentity = manager.hasIdentity();\n      expect(hasIdentity).toBe(false);\n    });\n\n    it('should get current identity', async () => {\n      const generated = await manager.generateIdentity('Frank');\n      const current = manager.getCurrentIdentity();\n\n      expect(current).toBeDefined();\n      expect(current?.id).toBe(generated.id);\n    });\n\n    it('should return null for current identity when none exists', () => {\n      const current = manager.getCurrentIdentity();\n      expect(current).toBeNull();\n    });\n  });\n\n  describe('Signing Operations', () => {\n    it('should sign data with private key', async () => {\n      await manager.generateIdentity();\n      const data = new Uint8Array([1, 2, 3, 4, 5]);\n\n      const signature = await manager.sign(data);\n\n      expect(signature).toBeInstanceOf(Uint8Array);\n      expect(signature.length).toBeGreaterThan(0);\n    });\n\n    it('should verify signature with public key', async () => {\n      await manager.generateIdentity();\n      const data = new Uint8Array([1, 2, 3, 4, 5]);\n\n      const signature = await manager.sign(data);\n      const verified = await manager.verify(data, signature);\n\n      expect(verified).toBe(true);\n    });\n\n    it('should reject invalid signature', async () => {\n      await manager.generateIdentity();\n      const data = new Uint8Array([1, 2, 3, 4, 5]);\n      const wrongSignature = new Uint8Array(64);\n\n      const verified = await manager.verify(data, wrongSignature);\n      expect(verified).toBe(false);\n    });\n\n    it('should reject modified data', async () => {\n      await manager.generateIdentity();\n      const data = new Uint8Array([1, 2, 3, 4, 5]);\n      const signature = await manager.sign(data);\n\n      const identity = await manager.getIdentity();\n      expect(identity).toBeDefined();\n      \n      const modifiedData = new Uint8Array([1, 2, 3, 4, 6]);\n      const verified = await manager.verify(modifiedData, signature, identity!.publicKey);\n\n      expect(verified).toBe(false);\n    });\n  });\n\n  describe('Display Name Management', () => {\n    it('should have display name from generation', async () => {\n      await manager.generateIdentity('Initial');\n\n      const identity = await manager.getIdentity();\n      expect(identity?.displayName).toBe('Initial');\n    });\n\n    it('should persist display name', async () => {\n      await manager.generateIdentity('TestName');\n\n      const newManager = new IdentityManager();\n      const loaded = await newManager.loadIdentity();\n\n      expect(loaded?.displayName).toBe('TestName');\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should throw when trying to sign without identity', async () => {\n      const data = new Uint8Array([1, 2, 3]);\n\n      await expect(manager.sign(data)).rejects.toThrow();\n    });\n\n    it('should throw when trying to export without identity', async () => {\n      await expect(manager.exportIdentity()).rejects.toThrow();\n    });\n\n    it('should throw when importing invalid identity', async () => {\n      const invalid = {\n        id: 'invalid',\n        publicKeyJwk: {},\n        privateKeyJwk: {},\n        created: new Date().toISOString()\n      };\n\n      await expect(manager.importIdentity(invalid as any)).rejects.toThrow();\n    });\n  });\n\n  describe('Security', () => {\n    it('should not expose private key directly', async () => {\n      const identity = await manager.generateIdentity();\n\n      expect(identity.privateKey.extractable).toBe(true); // For export\n      expect(identity.privateKey.usages).toContain('sign');\n    });\n\n    it('should generate cryptographically secure IDs', async () => {\n      const identity1 = await manager.generateIdentity();\n      const identity2 = await manager.generateIdentity();\n\n      // IDs should be sufficiently random\n      expect(identity1.id.length).toBeGreaterThanOrEqual(16);\n      expect(identity2.id.length).toBeGreaterThanOrEqual(16);\n      expect(identity1.id).not.toBe(identity2.id);\n    });\n  });\n});\n"],"version":3}