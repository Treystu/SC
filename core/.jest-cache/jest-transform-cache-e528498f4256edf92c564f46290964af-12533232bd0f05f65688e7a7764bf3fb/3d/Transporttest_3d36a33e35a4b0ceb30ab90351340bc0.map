{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/transport/Transport.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/transport/Transport.test.ts"],"sourcesContent":["/**\n * Tests for Transport Abstraction Layer\n */\n\nimport {\n  TransportMessage,\n  TransportEvents,\n  TransportPeerId,\n  DefaultTransportRegistry,\n} from \"./Transport.js\";\nimport { MockTransport, clearMockNetwork, getMockNetworkPeers } from \"./__mocks__/MockTransport.js\";\n\ndescribe(\"Transport Abstraction\", () => {\n  afterEach(() => {\n    clearMockNetwork();\n  });\n\n  describe(\"MockTransport\", () => {\n    it(\"should start and stop correctly\", async () => {\n      const transport = new MockTransport(\"peer-1\");\n      const events: TransportEvents = {\n        onMessage: jest.fn(),\n      };\n\n      expect(transport.isTransportRunning()).toBe(false);\n\n      await transport.start(events);\n      expect(transport.isTransportRunning()).toBe(true);\n      expect(getMockNetworkPeers()).toContain(\"peer-1\");\n\n      await transport.stop();\n      expect(transport.isTransportRunning()).toBe(false);\n      expect(getMockNetworkPeers()).not.toContain(\"peer-1\");\n    });\n\n    it(\"should connect two peers\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      const events1: TransportEvents = {\n        onMessage: jest.fn(),\n        onPeerConnected: jest.fn(),\n      };\n\n      const events2: TransportEvents = {\n        onMessage: jest.fn(),\n        onPeerConnected: jest.fn(),\n      };\n\n      await transport1.start(events1);\n      await transport2.start(events2);\n\n      await transport1.connect(\"peer-2\");\n\n      expect(transport1.getConnectedPeers()).toContain(\"peer-2\");\n      expect(transport2.getConnectedPeers()).toContain(\"peer-1\");\n      expect(events1.onPeerConnected).toHaveBeenCalledWith(\"peer-2\", expect.any(Object));\n      expect(events2.onPeerConnected).toHaveBeenCalledWith(\"peer-1\", expect.any(Object));\n    });\n\n    it(\"should send messages between peers\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      const receivedMessages: TransportMessage[] = [];\n\n      const events1: TransportEvents = {\n        onMessage: jest.fn(),\n      };\n\n      const events2: TransportEvents = {\n        onMessage: (msg: TransportMessage) => receivedMessages.push(msg),\n      };\n\n      await transport1.start(events1);\n      await transport2.start(events2);\n      await transport1.connect(\"peer-2\");\n\n      const testPayload = new TextEncoder().encode(\"Hello, peer-2!\");\n      await transport1.send(\"peer-2\", testPayload);\n\n      expect(receivedMessages.length).toBe(1);\n      expect(receivedMessages[0].from).toBe(\"peer-1\");\n      expect(new TextDecoder().decode(receivedMessages[0].payload)).toBe(\"Hello, peer-2!\");\n    });\n\n    it(\"should track sent and received messages\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: jest.fn() });\n      await transport1.connect(\"peer-2\");\n\n      await transport1.send(\"peer-2\", new Uint8Array([1, 2, 3]));\n      await transport1.send(\"peer-2\", new Uint8Array([4, 5, 6]));\n\n      expect(transport1.sentMessages.length).toBe(2);\n      expect(transport2.receivedMessages.length).toBe(2);\n    });\n\n    it(\"should broadcast to all connected peers\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n      const transport3 = new MockTransport(\"peer-3\");\n\n      const received2: TransportMessage[] = [];\n      const received3: TransportMessage[] = [];\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: (m: TransportMessage) => received2.push(m) });\n      await transport3.start({ onMessage: (m: TransportMessage) => received3.push(m) });\n\n      await transport1.connect(\"peer-2\");\n      await transport1.connect(\"peer-3\");\n\n      await transport1.broadcast(new TextEncoder().encode(\"Broadcast!\"));\n\n      expect(received2.length).toBe(1);\n      expect(received3.length).toBe(1);\n    });\n\n    it(\"should exclude specified peer from broadcast\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n      const transport3 = new MockTransport(\"peer-3\");\n\n      const received2: TransportMessage[] = [];\n      const received3: TransportMessage[] = [];\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: (m: TransportMessage) => received2.push(m) });\n      await transport3.start({ onMessage: (m: TransportMessage) => received3.push(m) });\n\n      await transport1.connect(\"peer-2\");\n      await transport1.connect(\"peer-3\");\n\n      await transport1.broadcast(new TextEncoder().encode(\"Broadcast!\"), \"peer-2\");\n\n      expect(received2.length).toBe(0);\n      expect(received3.length).toBe(1);\n    });\n\n    it(\"should disconnect peers correctly\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      const disconnected: TransportPeerId[] = [];\n\n      const events1: TransportEvents = {\n        onMessage: jest.fn(),\n        onPeerDisconnected: (id: TransportPeerId) => disconnected.push(id),\n      };\n\n      await transport1.start(events1);\n      await transport2.start({ onMessage: jest.fn() });\n      await transport1.connect(\"peer-2\");\n\n      expect(transport1.getConnectedPeers()).toContain(\"peer-2\");\n\n      await transport1.disconnect(\"peer-2\");\n\n      expect(transport1.getConnectedPeers()).not.toContain(\"peer-2\");\n      expect(disconnected).toContain(\"peer-2\");\n    });\n\n    it(\"should handle connection failures\", async () => {\n      const transport = new MockTransport(\"peer-1\", { failConnections: true });\n      const errors: Error[] = [];\n\n      await transport.start({\n        onMessage: jest.fn(),\n        onError: (err: Error) => errors.push(err),\n      });\n\n      await expect(transport.connect(\"peer-2\")).rejects.toThrow(\"Connection to peer-2 failed\");\n      expect(errors.length).toBe(1);\n    });\n\n    it(\"should handle send failures\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      const errors: Error[] = [];\n      await transport1.start({\n        onMessage: jest.fn(),\n        onError: (err: Error) => errors.push(err),\n      });\n      await transport2.start({ onMessage: jest.fn() });\n      await transport1.connect(\"peer-2\");\n\n      transport1.updateConfig({ failSends: true });\n\n      await expect(transport1.send(\"peer-2\", new Uint8Array([1]))).rejects.toThrow();\n      expect(errors.length).toBe(1);\n    });\n\n    it(\"should simulate latency\", async () => {\n      const transport1 = new MockTransport(\"peer-1\", { latencyMs: 50 });\n      const transport2 = new MockTransport(\"peer-2\");\n\n      let receivedAt = 0;\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({\n        onMessage: () => {\n          receivedAt = Date.now();\n        },\n      });\n      await transport1.connect(\"peer-2\");\n\n      const sentAt = Date.now();\n      await transport1.send(\"peer-2\", new Uint8Array([1]));\n\n      // Should have some latency\n      expect(receivedAt - sentAt).toBeGreaterThanOrEqual(40); // Allow some variance\n    });\n\n    it(\"should simulate packet loss\", async () => {\n      const transport1 = new MockTransport(\"peer-1\", { packetLossRate: 1 }); // 100% loss\n      const transport2 = new MockTransport(\"peer-2\");\n\n      const received: TransportMessage[] = [];\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: (m: TransportMessage) => received.push(m) });\n      await transport1.connect(\"peer-2\");\n\n      await transport1.send(\"peer-2\", new Uint8Array([1]));\n      await transport1.send(\"peer-2\", new Uint8Array([2]));\n      await transport1.send(\"peer-2\", new Uint8Array([3]));\n\n      expect(received.length).toBe(0); // All messages lost\n    });\n\n    it(\"should get peer info correctly\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: jest.fn() });\n      await transport1.connect(\"peer-2\");\n\n      const peerInfo = transport1.getPeerInfo(\"peer-2\");\n      expect(peerInfo).toBeDefined();\n      expect(peerInfo?.peerId).toBe(\"peer-2\");\n      expect(peerInfo?.state).toBe(\"connected\");\n      expect(peerInfo?.transportType).toBe(\"mock\");\n    });\n\n    it(\"should track connection attempts\", async () => {\n      const transport = new MockTransport(\"peer-1\");\n      await transport.start({ onMessage: jest.fn() });\n\n      await transport.connect(\"peer-2\");\n      await transport.connect(\"peer-3\");\n\n      expect(transport.connectionAttempts).toEqual([\"peer-2\", \"peer-3\"]);\n    });\n\n    it(\"should reset tracking data\", async () => {\n      const transport = new MockTransport(\"peer-1\");\n      await transport.start({ onMessage: jest.fn() });\n\n      await transport.connect(\"peer-2\");\n      transport.sentMessages.push({} as TransportMessage);\n      transport.receivedMessages.push({} as TransportMessage);\n\n      transport.resetTracking();\n\n      expect(transport.sentMessages.length).toBe(0);\n      expect(transport.receivedMessages.length).toBe(0);\n      expect(transport.connectionAttempts.length).toBe(0);\n    });\n  });\n\n  describe(\"TransportRegistry\", () => {\n    it(\"should register and retrieve transport factories\", () => {\n      const registry = new DefaultTransportRegistry();\n      const factory = jest.fn(() => new MockTransport(\"test\"));\n\n      registry.register(\"test-transport\", factory);\n\n      const retrieved = registry.get(\"test-transport\");\n      expect(retrieved).toBe(factory);\n    });\n\n    it(\"should return undefined for unregistered types\", () => {\n      const registry = new DefaultTransportRegistry();\n      expect(registry.get(\"nonexistent\")).toBeUndefined();\n    });\n\n    it(\"should list all registered types\", () => {\n      const registry = new DefaultTransportRegistry();\n      registry.register(\"type1\", jest.fn());\n      registry.register(\"type2\", jest.fn());\n      registry.register(\"type3\", jest.fn());\n\n      const types = registry.getTypes();\n      expect(types).toContain(\"type1\");\n      expect(types).toContain(\"type2\");\n      expect(types).toContain(\"type3\");\n    });\n  });\n\n  describe(\"clearMockNetwork\", () => {\n    it(\"should clear all registered mock transports\", async () => {\n      const transport1 = new MockTransport(\"peer-1\");\n      const transport2 = new MockTransport(\"peer-2\");\n\n      await transport1.start({ onMessage: jest.fn() });\n      await transport2.start({ onMessage: jest.fn() });\n\n      expect(getMockNetworkPeers().length).toBe(2);\n\n      clearMockNetwork();\n\n      expect(getMockNetworkPeers().length).toBe(0);\n    });\n  });\n});\n"],"version":3}