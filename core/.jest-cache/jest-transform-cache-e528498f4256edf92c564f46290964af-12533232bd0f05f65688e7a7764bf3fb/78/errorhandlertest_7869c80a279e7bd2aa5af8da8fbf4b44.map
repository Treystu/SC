{"file":"/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/error-handler.test.ts","mappings":"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","names":[],"sources":["/Users/christymaxwell/Desktop/Luke_Stuff/GitHub/SC/core/src/error-handler.test.ts"],"sourcesContent":["/**\n * Tests for error-handler.ts - Centralized error management system\n */\n\nimport {\n  ErrorSeverity,\n  ErrorCategory,\n  ErrorContext,\n  AppError,\n  ErrorHandler,\n  errorHandler\n} from './error-handler';\n\ndescribe('error-handler', () => {\n  let handler: ErrorHandler;\n\n  beforeEach(() => {\n    handler = ErrorHandler.getInstance();\n    handler.clearLog();\n  });\n\n  describe('ErrorSeverity', () => {\n    it('should have all severity levels', () => {\n      expect(ErrorSeverity.LOW).toBe('low');\n      expect(ErrorSeverity.MEDIUM).toBe('medium');\n      expect(ErrorSeverity.HIGH).toBe('high');\n      expect(ErrorSeverity.CRITICAL).toBe('critical');\n    });\n  });\n\n  describe('ErrorCategory', () => {\n    it('should have all error categories', () => {\n      expect(ErrorCategory.NETWORK).toBe('network');\n      expect(ErrorCategory.CRYPTO).toBe('crypto');\n      expect(ErrorCategory.STORAGE).toBe('storage');\n      expect(ErrorCategory.VALIDATION).toBe('validation');\n      expect(ErrorCategory.PERMISSION).toBe('permission');\n      expect(ErrorCategory.SYSTEM).toBe('system');\n    });\n  });\n\n  describe('AppError', () => {\n    it('should create error with required fields', () => {\n      const error = new AppError({\n        category: ErrorCategory.NETWORK,\n        severity: ErrorSeverity.HIGH,\n        message: 'Network connection failed'\n      });\n\n      expect(error.category).toBe(ErrorCategory.NETWORK);\n      expect(error.severity).toBe(ErrorSeverity.HIGH);\n      expect(error.message).toBe('Network connection failed');\n      expect(error.timestamp).toBeDefined();\n      expect(error.name).toBe('AppError');\n    });\n\n    it('should include optional fields', () => {\n      const error = new AppError({\n        category: ErrorCategory.CRYPTO,\n        severity: ErrorSeverity.CRITICAL,\n        message: 'Decryption failed',\n        code: 'CRYPTO_001',\n        details: { algorithm: 'AES-256' }\n      });\n\n      expect(error.code).toBe('CRYPTO_001');\n      expect(error.details).toEqual({ algorithm: 'AES-256' });\n    });\n\n    it('should capture stack trace', () => {\n      const error = new AppError({\n        category: ErrorCategory.SYSTEM,\n        severity: ErrorSeverity.MEDIUM,\n        message: 'Test error'\n      });\n\n      expect(error.stack).toBeDefined();\n    });\n\n    it('should extend Error class', () => {\n      const error = new AppError({\n        category: ErrorCategory.VALIDATION,\n        severity: ErrorSeverity.LOW,\n        message: 'Validation failed'\n      });\n\n      expect(error instanceof Error).toBe(true);\n      expect(error instanceof AppError).toBe(true);\n    });\n  });\n\n  describe('ErrorHandler', () => {\n    it('should be a singleton', () => {\n      const instance1 = ErrorHandler.getInstance();\n      const instance2 = ErrorHandler.getInstance();\n      expect(instance1).toBe(instance2);\n    });\n\n    it('should return global errorHandler instance', () => {\n      expect(errorHandler).toBe(handler);\n    });\n  });\n\n  describe('handle', () => {\n    it('should handle AppError', () => {\n      const error = new AppError({\n        category: ErrorCategory.NETWORK,\n        severity: ErrorSeverity.HIGH,\n        message: 'Connection timeout'\n      });\n\n      handler.handle(error);\n\n      const errors = handler.getRecentErrors();\n      expect(errors).toHaveLength(1);\n      expect(errors[0].message).toBe('Connection timeout');\n      expect(errors[0].category).toBe(ErrorCategory.NETWORK);\n    });\n\n    it('should handle standard Error', () => {\n      const error = new Error('Standard error');\n      handler.handle(error);\n\n      const errors = handler.getRecentErrors();\n      expect(errors).toHaveLength(1);\n      expect(errors[0].message).toBe('Standard error');\n      expect(errors[0].category).toBe(ErrorCategory.SYSTEM);\n      expect(errors[0].severity).toBe(ErrorSeverity.MEDIUM);\n    });\n\n    it('should merge additional context', () => {\n      const error = new Error('Test error');\n      handler.handle(error, {\n        category: ErrorCategory.CRYPTO,\n        severity: ErrorSeverity.CRITICAL,\n        code: 'TEST_001',\n        details: { key: 'value' },\n        userId: 'user123',\n        sessionId: 'session456'\n      });\n\n      const errors = handler.getRecentErrors();\n      expect(errors[0].category).toBe(ErrorCategory.CRYPTO);\n      expect(errors[0].severity).toBe(ErrorSeverity.CRITICAL);\n      expect(errors[0].code).toBe('TEST_001');\n      expect(errors[0].details).toEqual({ key: 'value' });\n      expect(errors[0].userId).toBe('user123');\n      expect(errors[0].sessionId).toBe('session456');\n    });\n\n    it('should notify error listeners', () => {\n      const listener = jest.fn();\n      handler.onError(listener);\n\n      const error = new Error('Test error');\n      handler.handle(error);\n\n      expect(listener).toHaveBeenCalledTimes(1);\n      expect(listener).toHaveBeenCalledWith(\n        expect.objectContaining({\n          message: 'Test error',\n          category: ErrorCategory.SYSTEM\n        })\n      );\n    });\n\n    it('should handle listener errors gracefully', () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n      const badListener = jest.fn(() => {\n        throw new Error('Listener failed');\n      });\n      \n      handler.onError(badListener);\n      handler.handle(new Error('Test'));\n\n      expect(consoleSpy).toHaveBeenCalled();\n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('onError', () => {\n    it('should register error listener', () => {\n      const listener = jest.fn();\n      handler.onError(listener);\n\n      handler.handle(new Error('Test'));\n\n      expect(listener).toHaveBeenCalled();\n    });\n\n    it('should return unsubscribe function', () => {\n      const listener = jest.fn();\n      const unsubscribe = handler.onError(listener);\n\n      handler.handle(new Error('Test 1'));\n      expect(listener).toHaveBeenCalledTimes(1);\n\n      unsubscribe();\n      handler.handle(new Error('Test 2'));\n      expect(listener).toHaveBeenCalledTimes(1); // Not called again\n    });\n\n    it('should support multiple listeners', () => {\n      const listener1 = jest.fn();\n      const listener2 = jest.fn();\n      \n      handler.onError(listener1);\n      handler.onError(listener2);\n\n      handler.handle(new Error('Test'));\n\n      expect(listener1).toHaveBeenCalled();\n      expect(listener2).toHaveBeenCalled();\n    });\n  });\n\n  describe('getRecentErrors', () => {\n    it('should return recent errors', () => {\n      handler.handle(new Error('Error 1'));\n      handler.handle(new Error('Error 2'));\n      handler.handle(new Error('Error 3'));\n\n      const errors = handler.getRecentErrors();\n      expect(errors).toHaveLength(3);\n    });\n\n    it('should limit number of errors returned', () => {\n      for (let i = 0; i < 100; i++) {\n        handler.handle(new Error(`Error ${i}`));\n      }\n\n      const errors = handler.getRecentErrors(10);\n      expect(errors).toHaveLength(10);\n      expect(errors[9].message).toBe('Error 99');\n    });\n\n    it('should default to 50 errors', () => {\n      for (let i = 0; i < 100; i++) {\n        handler.handle(new Error(`Error ${i}`));\n      }\n\n      const errors = handler.getRecentErrors();\n      expect(errors).toHaveLength(50);\n    });\n  });\n\n  describe('getErrorsByCategory', () => {\n    beforeEach(() => {\n      handler.handle(new Error('Network error'), { category: ErrorCategory.NETWORK });\n      handler.handle(new Error('Crypto error'), { category: ErrorCategory.CRYPTO });\n      handler.handle(new Error('Another network error'), { category: ErrorCategory.NETWORK });\n      handler.handle(new Error('Storage error'), { category: ErrorCategory.STORAGE });\n    });\n\n    it('should filter errors by category', () => {\n      const networkErrors = handler.getErrorsByCategory(ErrorCategory.NETWORK);\n      expect(networkErrors).toHaveLength(2);\n      expect(networkErrors.every(e => e.category === ErrorCategory.NETWORK)).toBe(true);\n    });\n\n    it('should return empty array for unused category', () => {\n      const validationErrors = handler.getErrorsByCategory(ErrorCategory.VALIDATION);\n      expect(validationErrors).toHaveLength(0);\n    });\n  });\n\n  describe('getErrorsBySeverity', () => {\n    beforeEach(() => {\n      handler.handle(new Error('Critical error'), { severity: ErrorSeverity.CRITICAL });\n      handler.handle(new Error('High error'), { severity: ErrorSeverity.HIGH });\n      handler.handle(new Error('Another critical'), { severity: ErrorSeverity.CRITICAL });\n      handler.handle(new Error('Low error'), { severity: ErrorSeverity.LOW });\n    });\n\n    it('should filter errors by severity', () => {\n      const criticalErrors = handler.getErrorsBySeverity(ErrorSeverity.CRITICAL);\n      expect(criticalErrors).toHaveLength(2);\n      expect(criticalErrors.every(e => e.severity === ErrorSeverity.CRITICAL)).toBe(true);\n    });\n\n    it('should return empty array for unused severity', () => {\n      handler.clearLog();\n      const mediumErrors = handler.getErrorsBySeverity(ErrorSeverity.MEDIUM);\n      expect(mediumErrors).toHaveLength(0);\n    });\n  });\n\n  describe('clearLog', () => {\n    it('should clear error log', () => {\n      handler.handle(new Error('Error 1'));\n      handler.handle(new Error('Error 2'));\n      \n      expect(handler.getRecentErrors()).toHaveLength(2);\n\n      handler.clearLog();\n      \n      expect(handler.getRecentErrors()).toHaveLength(0);\n    });\n  });\n\n  describe('getStats', () => {\n    beforeEach(() => {\n      handler.handle(new Error('Network 1'), { \n        category: ErrorCategory.NETWORK, \n        severity: ErrorSeverity.HIGH \n      });\n      handler.handle(new Error('Network 2'), { \n        category: ErrorCategory.NETWORK, \n        severity: ErrorSeverity.MEDIUM \n      });\n      handler.handle(new Error('Crypto 1'), { \n        category: ErrorCategory.CRYPTO, \n        severity: ErrorSeverity.CRITICAL \n      });\n      handler.handle(new Error('Storage 1'), { \n        category: ErrorCategory.STORAGE, \n        severity: ErrorSeverity.LOW \n      });\n    });\n\n    it('should return total error count', () => {\n      const stats = handler.getStats();\n      expect(stats.total).toBe(4);\n    });\n\n    it('should count errors by category', () => {\n      const stats = handler.getStats();\n      expect(stats.byCategory[ErrorCategory.NETWORK]).toBe(2);\n      expect(stats.byCategory[ErrorCategory.CRYPTO]).toBe(1);\n      expect(stats.byCategory[ErrorCategory.STORAGE]).toBe(1);\n      expect(stats.byCategory[ErrorCategory.VALIDATION]).toBe(0);\n    });\n\n    it('should count errors by severity', () => {\n      const stats = handler.getStats();\n      expect(stats.bySeverity[ErrorSeverity.CRITICAL]).toBe(1);\n      expect(stats.bySeverity[ErrorSeverity.HIGH]).toBe(1);\n      expect(stats.bySeverity[ErrorSeverity.MEDIUM]).toBe(1);\n      expect(stats.bySeverity[ErrorSeverity.LOW]).toBe(1);\n    });\n\n    it('should initialize all categories and severities', () => {\n      handler.clearLog();\n      const stats = handler.getStats();\n\n      Object.values(ErrorCategory).forEach(cat => {\n        expect(stats.byCategory[cat as ErrorCategory]).toBe(0);\n      });\n\n      Object.values(ErrorSeverity).forEach(sev => {\n        expect(stats.bySeverity[sev as ErrorSeverity]).toBe(0);\n      });\n    });\n  });\n\n  describe('Log size management', () => {\n    it('should limit log size to maxLogSize', () => {\n      // maxLogSize is 1000 by default\n      for (let i = 0; i < 1500; i++) {\n        handler.handle(new Error(`Error ${i}`));\n      }\n\n      const errors = handler.getRecentErrors(2000);\n      expect(errors.length).toBeLessThanOrEqual(1000);\n    });\n\n    it('should keep most recent errors when trimming', () => {\n      for (let i = 0; i < 1500; i++) {\n        handler.handle(new Error(`Error ${i}`));\n      }\n\n      const errors = handler.getRecentErrors(2000);\n      // Should have errors 500-1499 (most recent 1000)\n      expect(errors[errors.length - 1].message).toContain('1499');\n    });\n  });\n\n  describe('Recovery mechanisms', () => {\n    it('should attempt network error recovery', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n      \n      handler.handle(new Error('Network error'), {\n        category: ErrorCategory.NETWORK,\n        severity: ErrorSeverity.MEDIUM\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        expect.stringContaining('Queuing network operation for retry')\n      );\n      \n      consoleSpy.mockRestore();\n    });\n\n    it('should not retry critical network errors', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n      \n      handler.handle(new Error('Critical network error'), {\n        category: ErrorCategory.NETWORK,\n        severity: ErrorSeverity.CRITICAL\n      });\n\n      expect(consoleSpy).not.toHaveBeenCalledWith(\n        expect.stringContaining('Queuing network operation for retry')\n      );\n      \n      consoleSpy.mockRestore();\n    });\n\n    it('should handle storage quota errors', () => {\n      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();\n      \n      handler.handle(new Error('Storage quota exceeded'), {\n        category: ErrorCategory.STORAGE,\n        code: 'QUOTA_EXCEEDED'\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        expect.stringContaining('Storage quota exceeded')\n      );\n      \n      consoleSpy.mockRestore();\n    });\n\n    it('should handle critical crypto errors', () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n      \n      handler.handle(new Error('Key compromised'), {\n        category: ErrorCategory.CRYPTO,\n        severity: ErrorSeverity.CRITICAL\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        expect.stringContaining('Critical crypto error')\n      );\n      \n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('Logging methods', () => {\n    it('should use console.error for critical severity', () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n      \n      handler.handle(new Error('Critical error'), {\n        severity: ErrorSeverity.CRITICAL\n      });\n\n      expect(consoleSpy).toHaveBeenCalled();\n      consoleSpy.mockRestore();\n    });\n\n    it('should use console.error for high severity', () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n      \n      handler.handle(new Error('High error'), {\n        severity: ErrorSeverity.HIGH\n      });\n\n      expect(consoleSpy).toHaveBeenCalled();\n      consoleSpy.mockRestore();\n    });\n\n    it('should use console.warn for medium severity', () => {\n      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();\n      \n      handler.handle(new Error('Medium error'), {\n        severity: ErrorSeverity.MEDIUM\n      });\n\n      expect(consoleSpy).toHaveBeenCalled();\n      consoleSpy.mockRestore();\n    });\n\n    it('should use console.log for low severity', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n      \n      handler.handle(new Error('Low error'), {\n        severity: ErrorSeverity.LOW\n      });\n\n      expect(consoleSpy).toHaveBeenCalled();\n      consoleSpy.mockRestore();\n    });\n  });\n});\n"],"version":3}