664b8210926f699c8e413f818996329a
"use strict";
/**
 * Node ID Utilities Tests
 */
Object.defineProperty(exports, "__esModule", { value: true });
const node_id_1 = require("./node-id");
describe('Node ID Utilities', () => {
    describe('generateNodeId', () => {
        it('should generate a 20-byte node ID', () => {
            const nodeId = (0, node_id_1.generateNodeId)();
            expect(nodeId).toBeInstanceOf(Uint8Array);
            expect(nodeId.length).toBe(node_id_1.NODE_ID_BYTES);
        });
        it('should generate unique node IDs', () => {
            const id1 = (0, node_id_1.generateNodeId)();
            const id2 = (0, node_id_1.generateNodeId)();
            expect((0, node_id_1.nodeIdsEqual)(id1, id2)).toBe(false);
        });
    });
    describe('nodeIdFromPublicKey', () => {
        it('should generate consistent node ID from public key', () => {
            const publicKey = new Uint8Array(32).fill(1);
            const id1 = (0, node_id_1.nodeIdFromPublicKey)(publicKey);
            const id2 = (0, node_id_1.nodeIdFromPublicKey)(publicKey);
            expect(id1.length).toBe(node_id_1.NODE_ID_BYTES);
            expect((0, node_id_1.nodeIdsEqual)(id1, id2)).toBe(true);
        });
        it('should generate different IDs for different public keys', () => {
            const pk1 = new Uint8Array(32).fill(1);
            const pk2 = new Uint8Array(32).fill(2);
            const id1 = (0, node_id_1.nodeIdFromPublicKey)(pk1);
            const id2 = (0, node_id_1.nodeIdFromPublicKey)(pk2);
            expect((0, node_id_1.nodeIdsEqual)(id1, id2)).toBe(false);
        });
    });
    describe('generateDHTKey', () => {
        it('should generate key from string', () => {
            const key = (0, node_id_1.generateDHTKey)('test-key');
            expect(key).toBeInstanceOf(Uint8Array);
            expect(key.length).toBe(node_id_1.NODE_ID_BYTES);
        });
        it('should generate key from Uint8Array', () => {
            const data = new Uint8Array([1, 2, 3, 4]);
            const key = (0, node_id_1.generateDHTKey)(data);
            expect(key.length).toBe(node_id_1.NODE_ID_BYTES);
        });
        it('should generate consistent keys', () => {
            const key1 = (0, node_id_1.generateDHTKey)('test');
            const key2 = (0, node_id_1.generateDHTKey)('test');
            expect((0, node_id_1.nodeIdsEqual)(key1, key2)).toBe(true);
        });
    });
    describe('xorDistance', () => {
        it('should compute XOR distance', () => {
            const a = new Uint8Array([0xFF, 0x00]);
            const b = new Uint8Array([0x00, 0xFF]);
            const distance = (0, node_id_1.xorDistance)(a, b);
            expect(distance[0]).toBe(0xFF);
            expect(distance[1]).toBe(0xFF);
        });
        it('should return zero for same IDs', () => {
            const a = new Uint8Array([0xFF, 0x0F]);
            const distance = (0, node_id_1.xorDistance)(a, a);
            expect(distance[0]).toBe(0);
            expect(distance[1]).toBe(0);
        });
        it('should throw for mismatched lengths', () => {
            const a = new Uint8Array([0xFF]);
            const b = new Uint8Array([0xFF, 0xFF]);
            expect(() => (0, node_id_1.xorDistance)(a, b)).toThrow();
        });
    });
    describe('compareDistance', () => {
        it('should return 0 for equal distances', () => {
            const a = new Uint8Array([0x10, 0x20]);
            const b = new Uint8Array([0x10, 0x20]);
            expect((0, node_id_1.compareDistance)(a, b)).toBe(0);
        });
        it('should return -1 when a < b', () => {
            const a = new Uint8Array([0x10, 0x20]);
            const b = new Uint8Array([0x20, 0x10]);
            expect((0, node_id_1.compareDistance)(a, b)).toBe(-1);
        });
        it('should return 1 when a > b', () => {
            const a = new Uint8Array([0x20, 0x10]);
            const b = new Uint8Array([0x10, 0x20]);
            expect((0, node_id_1.compareDistance)(a, b)).toBe(1);
        });
    });
    describe('isCloser', () => {
        it('should return true when a is closer', () => {
            const a = new Uint8Array([0x01]);
            const b = new Uint8Array([0x02]);
            expect((0, node_id_1.isCloser)(a, b)).toBe(true);
        });
        it('should return false when b is closer', () => {
            const a = new Uint8Array([0x02]);
            const b = new Uint8Array([0x01]);
            expect((0, node_id_1.isCloser)(a, b)).toBe(false);
        });
    });
    describe('bucketIndexFromDistance', () => {
        it('should return -1 for zero distance', () => {
            const distance = new Uint8Array(20).fill(0);
            expect((0, node_id_1.bucketIndexFromDistance)(distance)).toBe(-1);
        });
        it('should return 0 for maximum distance (first bit set)', () => {
            const distance = new Uint8Array(20);
            distance[0] = 0x80; // 10000000
            expect((0, node_id_1.bucketIndexFromDistance)(distance)).toBe(0);
        });
        it('should return correct index for various distances', () => {
            const distance1 = new Uint8Array(20);
            distance1[0] = 0x40; // 01000000 -> index 1
            expect((0, node_id_1.bucketIndexFromDistance)(distance1)).toBe(1);
            const distance2 = new Uint8Array(20);
            distance2[0] = 0x01; // 00000001 -> index 7
            expect((0, node_id_1.bucketIndexFromDistance)(distance2)).toBe(7);
            const distance3 = new Uint8Array(20);
            distance3[1] = 0x80; // Second byte, first bit -> index 8
            expect((0, node_id_1.bucketIndexFromDistance)(distance3)).toBe(8);
        });
    });
    describe('getBucketIndex', () => {
        it('should return bucket index for two different IDs', () => {
            const local = new Uint8Array(20).fill(0);
            const target = new Uint8Array(20).fill(0);
            target[0] = 0x80;
            const index = (0, node_id_1.getBucketIndex)(local, target);
            expect(index).toBe(0);
        });
    });
    describe('nodeIdToHex and hexToNodeId', () => {
        it('should convert to hex and back', () => {
            const original = (0, node_id_1.generateNodeId)();
            const hex = (0, node_id_1.nodeIdToHex)(original);
            const restored = (0, node_id_1.hexToNodeId)(hex);
            expect(hex.length).toBe(node_id_1.NODE_ID_BYTES * 2);
            expect((0, node_id_1.nodeIdsEqual)(original, restored)).toBe(true);
        });
        it('should throw for invalid hex length', () => {
            expect(() => (0, node_id_1.hexToNodeId)('abc')).toThrow();
        });
    });
    describe('nodeIdsEqual', () => {
        it('should return true for equal IDs', () => {
            const a = new Uint8Array([1, 2, 3]);
            const b = new Uint8Array([1, 2, 3]);
            expect((0, node_id_1.nodeIdsEqual)(a, b)).toBe(true);
        });
        it('should return false for different IDs', () => {
            const a = new Uint8Array([1, 2, 3]);
            const b = new Uint8Array([1, 2, 4]);
            expect((0, node_id_1.nodeIdsEqual)(a, b)).toBe(false);
        });
        it('should return false for different lengths', () => {
            const a = new Uint8Array([1, 2, 3]);
            const b = new Uint8Array([1, 2]);
            expect((0, node_id_1.nodeIdsEqual)(a, b)).toBe(false);
        });
    });
    describe('isValidNodeId', () => {
        it('should validate correct node IDs', () => {
            const valid = new Uint8Array(node_id_1.NODE_ID_BYTES);
            expect((0, node_id_1.isValidNodeId)(valid)).toBe(true);
        });
        it('should reject invalid types', () => {
            expect((0, node_id_1.isValidNodeId)('not-a-uint8array')).toBe(false);
            expect((0, node_id_1.isValidNodeId)(null)).toBe(false);
            expect((0, node_id_1.isValidNodeId)(undefined)).toBe(false);
            expect((0, node_id_1.isValidNodeId)(123)).toBe(false);
        });
        it('should reject wrong length', () => {
            expect((0, node_id_1.isValidNodeId)(new Uint8Array(10))).toBe(false);
        });
    });
    describe('copyNodeId', () => {
        it('should create an independent copy', () => {
            const original = (0, node_id_1.generateNodeId)();
            const copy = (0, node_id_1.copyNodeId)(original);
            expect((0, node_id_1.nodeIdsEqual)(original, copy)).toBe(true);
            // Modify copy
            copy[0] = (copy[0] + 1) % 256;
            expect((0, node_id_1.nodeIdsEqual)(original, copy)).toBe(false);
        });
    });
    describe('sortByDistance', () => {
        it('should sort contacts by distance to target', () => {
            const target = new Uint8Array(20).fill(0);
            const contacts = [
                { nodeId: new Uint8Array(20).fill(0xFF) },
                { nodeId: new Uint8Array(20).fill(0x01) },
                { nodeId: new Uint8Array(20).fill(0x7F) },
            ];
            const sorted = (0, node_id_1.sortByDistance)(contacts, target);
            // Closest should be 0x01 (smallest XOR with 0x00)
            expect(sorted[0].nodeId[0]).toBe(0x01);
            expect(sorted[1].nodeId[0]).toBe(0x7F);
            expect(sorted[2].nodeId[0]).toBe(0xFF);
        });
    });
    describe('getClosestContacts', () => {
        it('should return n closest contacts', () => {
            const target = new Uint8Array(20).fill(0);
            const contacts = [
                { nodeId: new Uint8Array(20).fill(0xFF) },
                { nodeId: new Uint8Array(20).fill(0x01) },
                { nodeId: new Uint8Array(20).fill(0x7F) },
                { nodeId: new Uint8Array(20).fill(0x3F) },
            ];
            const closest = (0, node_id_1.getClosestContacts)(contacts, target, 2);
            expect(closest.length).toBe(2);
            expect(closest[0].nodeId[0]).toBe(0x01);
            expect(closest[1].nodeId[0]).toBe(0x3F);
        });
        it('should return all contacts if n > contacts.length', () => {
            const target = new Uint8Array(20).fill(0);
            const contacts = [{ nodeId: (0, node_id_1.generateNodeId)() }];
            const closest = (0, node_id_1.getClosestContacts)(contacts, target, 10);
            expect(closest.length).toBe(1);
        });
    });
    describe('generateIdInBucket', () => {
        it('should generate ID in correct bucket', () => {
            const localId = new Uint8Array(20).fill(0);
            for (const bucketIndex of [0, 10, 50, 100, 159]) {
                const generatedId = (0, node_id_1.generateIdInBucket)(localId, bucketIndex);
                const actualBucket = (0, node_id_1.getBucketIndex)(localId, generatedId);
                // The generated ID should fall in exactly the target bucket
                // The implementation deterministically places the ID in the correct bucket
                expect(actualBucket).toBe(bucketIndex);
            }
        });
        it('should throw for invalid bucket index', () => {
            const localId = (0, node_id_1.generateNodeId)();
            expect(() => (0, node_id_1.generateIdInBucket)(localId, -1)).toThrow();
            expect(() => (0, node_id_1.generateIdInBucket)(localId, 160)).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2NocmlzdHltYXh3ZWxsL0Rlc2t0b3AvTHVrZV9TdHVmZi9HaXRIdWIvU0MvY29yZS9zcmMvbWVzaC9kaHQvbm9kZS1pZC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCx1Q0FrQm1CO0FBRW5CLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7SUFDakMsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtRQUM5QixFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUEsd0JBQWMsR0FBRSxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQWEsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUN6QyxNQUFNLEdBQUcsR0FBRyxJQUFBLHdCQUFjLEdBQUUsQ0FBQztZQUM3QixNQUFNLEdBQUcsR0FBRyxJQUFBLHdCQUFjLEdBQUUsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBQSxzQkFBWSxFQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxFQUFFLENBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1lBQzVELE1BQU0sU0FBUyxHQUFHLElBQUksVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QyxNQUFNLEdBQUcsR0FBRyxJQUFBLDZCQUFtQixFQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sR0FB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LENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3pDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsTUFBTSxPQUFPLEdBQUcsSUFBQSx3QkFBYyxHQUFFLENBQUM7WUFDakMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUEsNEJBQWtCLEVBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4RCxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBQSw0QkFBa0IsRUFBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2NocmlzdHltYXh3ZWxsL0Rlc2t0b3AvTHVrZV9TdHVmZi9HaXRIdWIvU0MvY29yZS9zcmMvbWVzaC9kaHQvbm9kZS1pZC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTm9kZSBJRCBVdGlsaXRpZXMgVGVzdHNcbiAqL1xuXG5pbXBvcnQge1xuICBnZW5lcmF0ZU5vZGVJZCxcbiAgbm9kZUlkRnJvbVB1YmxpY0tleSxcbiAgZ2VuZXJhdGVESFRLZXksXG4gIHhvckRpc3RhbmNlLFxuICBjb21wYXJlRGlzdGFuY2UsXG4gIGlzQ2xvc2VyLFxuICBidWNrZXRJbmRleEZyb21EaXN0YW5jZSxcbiAgZ2V0QnVja2V0SW5kZXgsXG4gIG5vZGVJZFRvSGV4LFxuICBoZXhUb05vZGVJZCxcbiAgbm9kZUlkc0VxdWFsLFxuICBpc1ZhbGlkTm9kZUlkLFxuICBjb3B5Tm9kZUlkLFxuICBzb3J0QnlEaXN0YW5jZSxcbiAgZ2V0Q2xvc2VzdENvbnRhY3RzLFxuICBnZW5lcmF0ZUlkSW5CdWNrZXQsXG4gIE5PREVfSURfQllURVMsXG59IGZyb20gJy4vbm9kZS1pZCc7XG5cbmRlc2NyaWJlKCdOb2RlIElEIFV0aWxpdGllcycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2dlbmVyYXRlTm9kZUlkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYSAyMC1ieXRlIG5vZGUgSUQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBub2RlSWQgPSBnZW5lcmF0ZU5vZGVJZCgpO1xuICAgICAgZXhwZWN0KG5vZGVJZCkudG9CZUluc3RhbmNlT2YoVWludDhBcnJheSk7XG4gICAgICBleHBlY3Qobm9kZUlkLmxlbmd0aCkudG9CZShOT0RFX0lEX0JZVEVTKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgdW5pcXVlIG5vZGUgSURzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaWQxID0gZ2VuZXJhdGVOb2RlSWQoKTtcbiAgICAgIGNvbnN0IGlkMiA9IGdlbmVyYXRlTm9kZUlkKCk7XG4gICAgICBleHBlY3Qobm9kZUlkc0VxdWFsKGlkMSwgaWQyKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdub2RlSWRGcm9tUHVibGljS2V5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29uc2lzdGVudCBub2RlIElEIGZyb20gcHVibGljIGtleScsICgpID0+IHtcbiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IG5ldyBVaW50OEFycmF5KDMyKS5maWxsKDEpO1xuICAgICAgY29uc3QgaWQxID0gbm9kZUlkRnJvbVB1YmxpY0tleShwdWJsaWNLZXkpO1xuICAgICAgY29uc3QgaWQyID0gbm9kZUlkRnJvbVB1YmxpY0tleShwdWJsaWNLZXkpO1xuICAgICAgXG4gICAgICBleHBlY3QoaWQxLmxlbmd0aCkudG9CZShOT0RFX0lEX0JZVEVTKTtcbiAgICAgIGV4cGVjdChub2RlSWRzRXF1YWwoaWQxLCBpZDIpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBkaWZmZXJlbnQgSURzIGZvciBkaWZmZXJlbnQgcHVibGljIGtleXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwazEgPSBuZXcgVWludDhBcnJheSgzMikuZmlsbCgxKTtcbiAgICAgIGNvbnN0IHBrMiA9IG5ldyBVaW50OEFycmF5KDMyKS5maWxsKDIpO1xuICAgICAgXG4gICAgICBjb25zdCBpZDEgPSBub2RlSWRGcm9tUHVibGljS2V5KHBrMSk7XG4gICAgICBjb25zdCBpZDIgPSBub2RlSWRGcm9tUHVibGljS2V5KHBrMik7XG4gICAgICBcbiAgICAgIGV4cGVjdChub2RlSWRzRXF1YWwoaWQxLCBpZDIpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dlbmVyYXRlREhUS2V5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUga2V5IGZyb20gc3RyaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gZ2VuZXJhdGVESFRLZXkoJ3Rlc3Qta2V5Jyk7XG4gICAgICBleHBlY3Qoa2V5KS50b0JlSW5zdGFuY2VPZihVaW50OEFycmF5KTtcbiAgICAgIGV4cGVjdChrZXkubGVuZ3RoKS50b0JlKE5PREVfSURfQllURVMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBrZXkgZnJvbSBVaW50OEFycmF5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KFsxLCAyLCAzLCA0XSk7XG4gICAgICBjb25zdCBrZXkgPSBnZW5lcmF0ZURIVEtleShkYXRhKTtcbiAgICAgIGV4cGVjdChrZXkubGVuZ3RoKS50b0JlKE5PREVfSURfQllURVMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb25zaXN0ZW50IGtleXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBrZXkxID0gZ2VuZXJhdGVESFRLZXkoJ3Rlc3QnKTtcbiAgICAgIGNvbnN0IGtleTIgPSBnZW5lcmF0ZURIVEtleSgndGVzdCcpO1xuICAgICAgZXhwZWN0KG5vZGVJZHNFcXVhbChrZXkxLCBrZXkyKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3hvckRpc3RhbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcHV0ZSBYT1IgZGlzdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoWzB4RkYsIDB4MDBdKTtcbiAgICAgIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHhGRl0pO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSB4b3JEaXN0YW5jZShhLCBiKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRpc3RhbmNlWzBdKS50b0JlKDB4RkYpO1xuICAgICAgZXhwZWN0KGRpc3RhbmNlWzFdKS50b0JlKDB4RkYpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gemVybyBmb3Igc2FtZSBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoWzB4RkYsIDB4MEZdKTtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0geG9yRGlzdGFuY2UoYSwgYSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkaXN0YW5jZVswXSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChkaXN0YW5jZVsxXSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZm9yIG1pc21hdGNoZWQgbGVuZ3RocycsICgpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBuZXcgVWludDhBcnJheShbMHhGRl0pO1xuICAgICAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KFsweEZGLCAweEZGXSk7XG4gICAgICBcbiAgICAgIGV4cGVjdCgoKSA9PiB4b3JEaXN0YW5jZShhLCBiKSkudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29tcGFyZURpc3RhbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgZm9yIGVxdWFsIGRpc3RhbmNlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBuZXcgVWludDhBcnJheShbMHgxMCwgMHgyMF0pO1xuICAgICAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KFsweDEwLCAweDIwXSk7XG4gICAgICBleHBlY3QoY29tcGFyZURpc3RhbmNlKGEsIGIpKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gLTEgd2hlbiBhIDwgYicsICgpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBuZXcgVWludDhBcnJheShbMHgxMCwgMHgyMF0pO1xuICAgICAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KFsweDIwLCAweDEwXSk7XG4gICAgICBleHBlY3QoY29tcGFyZURpc3RhbmNlKGEsIGIpKS50b0JlKC0xKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDEgd2hlbiBhID4gYicsICgpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBuZXcgVWludDhBcnJheShbMHgyMCwgMHgxMF0pO1xuICAgICAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KFsweDEwLCAweDIwXSk7XG4gICAgICBleHBlY3QoY29tcGFyZURpc3RhbmNlKGEsIGIpKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaXNDbG9zZXInLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIGEgaXMgY2xvc2VyJywgKCkgPT4ge1xuICAgICAgY29uc3QgYSA9IG5ldyBVaW50OEFycmF5KFsweDAxXSk7XG4gICAgICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDJdKTtcbiAgICAgIGV4cGVjdChpc0Nsb3NlcihhLCBiKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gYiBpcyBjbG9zZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDJdKTtcbiAgICAgIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShbMHgwMV0pO1xuICAgICAgZXhwZWN0KGlzQ2xvc2VyKGEsIGIpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1Y2tldEluZGV4RnJvbURpc3RhbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIC0xIGZvciB6ZXJvIGRpc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBuZXcgVWludDhBcnJheSgyMCkuZmlsbCgwKTtcbiAgICAgIGV4cGVjdChidWNrZXRJbmRleEZyb21EaXN0YW5jZShkaXN0YW5jZSkpLnRvQmUoLTEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gMCBmb3IgbWF4aW11bSBkaXN0YW5jZSAoZmlyc3QgYml0IHNldCknLCAoKSA9PiB7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IG5ldyBVaW50OEFycmF5KDIwKTtcbiAgICAgIGRpc3RhbmNlWzBdID0gMHg4MDsgLy8gMTAwMDAwMDBcbiAgICAgIGV4cGVjdChidWNrZXRJbmRleEZyb21EaXN0YW5jZShkaXN0YW5jZSkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IGluZGV4IGZvciB2YXJpb3VzIGRpc3RhbmNlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc3RhbmNlMSA9IG5ldyBVaW50OEFycmF5KDIwKTtcbiAgICAgIGRpc3RhbmNlMVswXSA9IDB4NDA7IC8vIDAxMDAwMDAwIC0+IGluZGV4IDFcbiAgICAgIGV4cGVjdChidWNrZXRJbmRleEZyb21EaXN0YW5jZShkaXN0YW5jZTEpKS50b0JlKDEpO1xuXG4gICAgICBjb25zdCBkaXN0YW5jZTIgPSBuZXcgVWludDhBcnJheSgyMCk7XG4gICAgICBkaXN0YW5jZTJbMF0gPSAweDAxOyAvLyAwMDAwMDAwMSAtPiBpbmRleCA3XG4gICAgICBleHBlY3QoYnVja2V0SW5kZXhGcm9tRGlzdGFuY2UoZGlzdGFuY2UyKSkudG9CZSg3KTtcblxuICAgICAgY29uc3QgZGlzdGFuY2UzID0gbmV3IFVpbnQ4QXJyYXkoMjApO1xuICAgICAgZGlzdGFuY2UzWzFdID0gMHg4MDsgLy8gU2Vjb25kIGJ5dGUsIGZpcnN0IGJpdCAtPiBpbmRleCA4XG4gICAgICBleHBlY3QoYnVja2V0SW5kZXhGcm9tRGlzdGFuY2UoZGlzdGFuY2UzKSkudG9CZSg4KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEJ1Y2tldEluZGV4JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGJ1Y2tldCBpbmRleCBmb3IgdHdvIGRpZmZlcmVudCBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsb2NhbCA9IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDApO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IFVpbnQ4QXJyYXkoMjApLmZpbGwoMCk7XG4gICAgICB0YXJnZXRbMF0gPSAweDgwO1xuICAgICAgXG4gICAgICBjb25zdCBpbmRleCA9IGdldEJ1Y2tldEluZGV4KGxvY2FsLCB0YXJnZXQpO1xuICAgICAgZXhwZWN0KGluZGV4KS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbm9kZUlkVG9IZXggYW5kIGhleFRvTm9kZUlkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29udmVydCB0byBoZXggYW5kIGJhY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBvcmlnaW5hbCA9IGdlbmVyYXRlTm9kZUlkKCk7XG4gICAgICBjb25zdCBoZXggPSBub2RlSWRUb0hleChvcmlnaW5hbCk7XG4gICAgICBjb25zdCByZXN0b3JlZCA9IGhleFRvTm9kZUlkKGhleCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChoZXgubGVuZ3RoKS50b0JlKE5PREVfSURfQllURVMgKiAyKTtcbiAgICAgIGV4cGVjdChub2RlSWRzRXF1YWwob3JpZ2luYWwsIHJlc3RvcmVkKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZm9yIGludmFsaWQgaGV4IGxlbmd0aCcsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiBoZXhUb05vZGVJZCgnYWJjJykpLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ25vZGVJZHNFcXVhbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGZvciBlcXVhbCBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoWzEsIDIsIDNdKTtcbiAgICAgIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShbMSwgMiwgM10pO1xuICAgICAgZXhwZWN0KG5vZGVJZHNFcXVhbChhLCBiKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBkaWZmZXJlbnQgSURzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYSA9IG5ldyBVaW50OEFycmF5KFsxLCAyLCAzXSk7XG4gICAgICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoWzEsIDIsIDRdKTtcbiAgICAgIGV4cGVjdChub2RlSWRzRXF1YWwoYSwgYikpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2UgZm9yIGRpZmZlcmVudCBsZW5ndGhzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYSA9IG5ldyBVaW50OEFycmF5KFsxLCAyLCAzXSk7XG4gICAgICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoWzEsIDJdKTtcbiAgICAgIGV4cGVjdChub2RlSWRzRXF1YWwoYSwgYikpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaXNWYWxpZE5vZGVJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvcnJlY3Qgbm9kZSBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZCA9IG5ldyBVaW50OEFycmF5KE5PREVfSURfQllURVMpO1xuICAgICAgZXhwZWN0KGlzVmFsaWROb2RlSWQodmFsaWQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCB0eXBlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChpc1ZhbGlkTm9kZUlkKCdub3QtYS11aW50OGFycmF5JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzVmFsaWROb2RlSWQobnVsbCkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzVmFsaWROb2RlSWQodW5kZWZpbmVkKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaXNWYWxpZE5vZGVJZCgxMjMpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHdyb25nIGxlbmd0aCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChpc1ZhbGlkTm9kZUlkKG5ldyBVaW50OEFycmF5KDEwKSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29weU5vZGVJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhbiBpbmRlcGVuZGVudCBjb3B5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWwgPSBnZW5lcmF0ZU5vZGVJZCgpO1xuICAgICAgY29uc3QgY29weSA9IGNvcHlOb2RlSWQob3JpZ2luYWwpO1xuICAgICAgXG4gICAgICBleHBlY3Qobm9kZUlkc0VxdWFsKG9yaWdpbmFsLCBjb3B5KSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gTW9kaWZ5IGNvcHlcbiAgICAgIGNvcHlbMF0gPSAoY29weVswXSArIDEpICUgMjU2O1xuICAgICAgZXhwZWN0KG5vZGVJZHNFcXVhbChvcmlnaW5hbCwgY29weSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc29ydEJ5RGlzdGFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzb3J0IGNvbnRhY3RzIGJ5IGRpc3RhbmNlIHRvIHRhcmdldCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDApO1xuICAgICAgXG4gICAgICBjb25zdCBjb250YWN0cyA9IFtcbiAgICAgICAgeyBub2RlSWQ6IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDB4RkYpIH0sXG4gICAgICAgIHsgbm9kZUlkOiBuZXcgVWludDhBcnJheSgyMCkuZmlsbCgweDAxKSB9LFxuICAgICAgICB7IG5vZGVJZDogbmV3IFVpbnQ4QXJyYXkoMjApLmZpbGwoMHg3RikgfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRCeURpc3RhbmNlKGNvbnRhY3RzLCB0YXJnZXQpO1xuICAgICAgXG4gICAgICAvLyBDbG9zZXN0IHNob3VsZCBiZSAweDAxIChzbWFsbGVzdCBYT1Igd2l0aCAweDAwKVxuICAgICAgZXhwZWN0KHNvcnRlZFswXS5ub2RlSWRbMF0pLnRvQmUoMHgwMSk7XG4gICAgICBleHBlY3Qoc29ydGVkWzFdLm5vZGVJZFswXSkudG9CZSgweDdGKTtcbiAgICAgIGV4cGVjdChzb3J0ZWRbMl0ubm9kZUlkWzBdKS50b0JlKDB4RkYpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0Q2xvc2VzdENvbnRhY3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIG4gY2xvc2VzdCBjb250YWN0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDApO1xuICAgICAgXG4gICAgICBjb25zdCBjb250YWN0cyA9IFtcbiAgICAgICAgeyBub2RlSWQ6IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDB4RkYpIH0sXG4gICAgICAgIHsgbm9kZUlkOiBuZXcgVWludDhBcnJheSgyMCkuZmlsbCgweDAxKSB9LFxuICAgICAgICB7IG5vZGVJZDogbmV3IFVpbnQ4QXJyYXkoMjApLmZpbGwoMHg3RikgfSxcbiAgICAgICAgeyBub2RlSWQ6IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDB4M0YpIH0sXG4gICAgICBdO1xuICAgICAgXG4gICAgICBjb25zdCBjbG9zZXN0ID0gZ2V0Q2xvc2VzdENvbnRhY3RzKGNvbnRhY3RzLCB0YXJnZXQsIDIpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2xvc2VzdC5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBleHBlY3QoY2xvc2VzdFswXS5ub2RlSWRbMF0pLnRvQmUoMHgwMSk7XG4gICAgICBleHBlY3QoY2xvc2VzdFsxXS5ub2RlSWRbMF0pLnRvQmUoMHgzRik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgY29udGFjdHMgaWYgbiA+IGNvbnRhY3RzLmxlbmd0aCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBVaW50OEFycmF5KDIwKS5maWxsKDApO1xuICAgICAgY29uc3QgY29udGFjdHMgPSBbeyBub2RlSWQ6IGdlbmVyYXRlTm9kZUlkKCkgfV07XG4gICAgICBcbiAgICAgIGNvbnN0IGNsb3Nlc3QgPSBnZXRDbG9zZXN0Q29udGFjdHMoY29udGFjdHMsIHRhcmdldCwgMTApO1xuICAgICAgZXhwZWN0KGNsb3Nlc3QubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVJZEluQnVja2V0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgSUQgaW4gY29ycmVjdCBidWNrZXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsb2NhbElkID0gbmV3IFVpbnQ4QXJyYXkoMjApLmZpbGwoMCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgYnVja2V0SW5kZXggb2YgWzAsIDEwLCA1MCwgMTAwLCAxNTldKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRlZElkID0gZ2VuZXJhdGVJZEluQnVja2V0KGxvY2FsSWQsIGJ1Y2tldEluZGV4KTtcbiAgICAgICAgY29uc3QgYWN0dWFsQnVja2V0ID0gZ2V0QnVja2V0SW5kZXgobG9jYWxJZCwgZ2VuZXJhdGVkSWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIGdlbmVyYXRlZCBJRCBzaG91bGQgZmFsbCBpbiBleGFjdGx5IHRoZSB0YXJnZXQgYnVja2V0XG4gICAgICAgIC8vIFRoZSBpbXBsZW1lbnRhdGlvbiBkZXRlcm1pbmlzdGljYWxseSBwbGFjZXMgdGhlIElEIGluIHRoZSBjb3JyZWN0IGJ1Y2tldFxuICAgICAgICBleHBlY3QoYWN0dWFsQnVja2V0KS50b0JlKGJ1Y2tldEluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZm9yIGludmFsaWQgYnVja2V0IGluZGV4JywgKCkgPT4ge1xuICAgICAgY29uc3QgbG9jYWxJZCA9IGdlbmVyYXRlTm9kZUlkKCk7XG4gICAgICBleHBlY3QoKCkgPT4gZ2VuZXJhdGVJZEluQnVja2V0KGxvY2FsSWQsIC0xKSkudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IGdlbmVyYXRlSWRJbkJ1Y2tldChsb2NhbElkLCAxNjApKS50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=