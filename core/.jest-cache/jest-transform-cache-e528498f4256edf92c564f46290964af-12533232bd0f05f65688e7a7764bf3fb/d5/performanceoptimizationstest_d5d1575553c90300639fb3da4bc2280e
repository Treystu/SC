b5a67f55d9f5221c080b7f0079ca1008
"use strict";
/**
 * Tests for Performance Optimizations
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const performance_optimizations_js_1 = require("./performance-optimizations.js");
(0, globals_1.describe)('LRUCache', () => {
    let cache;
    (0, globals_1.beforeEach)(() => {
        cache = new performance_optimizations_js_1.LRUCache(3);
    });
    (0, globals_1.it)('should store and retrieve values', () => {
        cache.set('a', 1);
        cache.set('b', 2);
        (0, globals_1.expect)(cache.get('a')).toBe(1);
        (0, globals_1.expect)(cache.get('b')).toBe(2);
    });
    (0, globals_1.it)('should return undefined for missing keys', () => {
        (0, globals_1.expect)(cache.get('missing')).toBeUndefined();
    });
    (0, globals_1.it)('should evict least recently used item when full', () => {
        cache.set('a', 1);
        cache.set('b', 2);
        cache.set('c', 3);
        // Access 'a' to make it recently used
        cache.get('a');
        // Add 'd' - should evict 'b' (least recently used)
        cache.set('d', 4);
        (0, globals_1.expect)(cache.get('a')).toBe(1); // Still there
        (0, globals_1.expect)(cache.get('b')).toBeUndefined(); // Evicted
        (0, globals_1.expect)(cache.get('c')).toBe(3); // Still there
        (0, globals_1.expect)(cache.get('d')).toBe(4); // New item
    });
    (0, globals_1.it)('should update existing keys without eviction', () => {
        cache.set('a', 1);
        cache.set('b', 2);
        cache.set('c', 3);
        cache.set('a', 10); // Update existing
        (0, globals_1.expect)(cache.get('a')).toBe(10);
        (0, globals_1.expect)(cache.size).toBe(3);
    });
    (0, globals_1.it)('should track hit rate correctly', () => {
        cache.set('a', 1);
        cache.get('a'); // hit
        cache.get('a'); // hit
        cache.get('missing'); // miss
        (0, globals_1.expect)(cache.stats.hits).toBe(2);
        (0, globals_1.expect)(cache.stats.misses).toBe(1);
        (0, globals_1.expect)(cache.hitRate).toBeCloseTo(0.667, 2);
    });
    (0, globals_1.it)('should delete items correctly', () => {
        cache.set('a', 1);
        (0, globals_1.expect)(cache.delete('a')).toBe(true);
        (0, globals_1.expect)(cache.get('a')).toBeUndefined();
        (0, globals_1.expect)(cache.delete('a')).toBe(false);
    });
    (0, globals_1.it)('should clear all items', () => {
        cache.set('a', 1);
        cache.set('b', 2);
        cache.clear();
        (0, globals_1.expect)(cache.size).toBe(0);
        (0, globals_1.expect)(cache.get('a')).toBeUndefined();
    });
});
(0, globals_1.describe)('BufferPool', () => {
    let pool;
    (0, globals_1.beforeEach)(() => {
        pool = new performance_optimizations_js_1.BufferPool(10);
    });
    (0, globals_1.it)('should acquire buffers of requested size', () => {
        const buffer = pool.acquire(100);
        (0, globals_1.expect)(buffer.length).toBeGreaterThanOrEqual(100);
    });
    (0, globals_1.it)('should normalize buffer sizes', () => {
        const buffer1 = pool.acquire(50); // Should get 64
        const buffer2 = pool.acquire(100); // Should get 128
        (0, globals_1.expect)(buffer1.length).toBe(64);
        (0, globals_1.expect)(buffer2.length).toBe(128);
    });
    (0, globals_1.it)('should reuse released buffers', () => {
        const buffer1 = pool.acquire(64);
        pool.release(buffer1);
        const buffer2 = pool.acquire(64);
        (0, globals_1.expect)(buffer2).toBe(buffer1);
    });
    (0, globals_1.it)('should clear buffers on release for security', () => {
        const buffer = pool.acquire(64);
        buffer[0] = 42;
        pool.release(buffer);
        const reused = pool.acquire(64);
        (0, globals_1.expect)(reused[0]).toBe(0);
    });
    (0, globals_1.it)('should provide withBuffer helper', () => {
        const result = pool.withBuffer(100, (buffer) => {
            buffer[0] = 1;
            return buffer.length;
        });
        (0, globals_1.expect)(result).toBeGreaterThanOrEqual(100);
    });
    (0, globals_1.it)('should track statistics', () => {
        pool.acquire(64);
        pool.acquire(64);
        const stats = pool.stats;
        (0, globals_1.expect)(stats.acquired).toBe(2);
        (0, globals_1.expect)(stats.created).toBe(2);
    });
});
(0, globals_1.describe)('MessageBatcher', () => {
    let batcher;
    let batches;
    (0, globals_1.beforeEach)(() => {
        batches = [];
        batcher = new performance_optimizations_js_1.MessageBatcher({
            maxBatchSize: 3,
            maxWaitMs: 100,
            onBatch: (items) => {
                batches.push(items);
            },
        });
    });
    (0, globals_1.afterEach)(() => {
        batcher.destroy();
    });
    (0, globals_1.it)('should batch messages by peer', () => {
        batcher.add({ peerId: 'peer1', data: new Uint8Array([1]) });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([2]) });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([3]) });
        // Should flush after reaching maxBatchSize
        (0, globals_1.expect)(batches.length).toBe(1);
        (0, globals_1.expect)(batches[0].length).toBe(3);
    });
    (0, globals_1.it)('should keep separate queues per peer', () => {
        batcher.add({ peerId: 'peer1', data: new Uint8Array([1]) });
        batcher.add({ peerId: 'peer2', data: new Uint8Array([2]) });
        batcher.flushAll();
        (0, globals_1.expect)(batches.length).toBe(2);
    });
    (0, globals_1.it)('should sort by priority', () => {
        batcher.add({ peerId: 'peer1', data: new Uint8Array([1]), priority: 1 });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([2]), priority: 10 });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([3]), priority: 5 });
        (0, globals_1.expect)(batches[0][0].priority).toBe(10); // Highest priority first
        (0, globals_1.expect)(batches[0][1].priority).toBe(5);
        (0, globals_1.expect)(batches[0][2].priority).toBe(1);
    });
    (0, globals_1.it)('should flush on timeout', async () => {
        batcher.add({ peerId: 'peer1', data: new Uint8Array([1]) });
        // Wait for timeout
        await new Promise((resolve) => setTimeout(resolve, 150));
        (0, globals_1.expect)(batches.length).toBe(1);
    });
    (0, globals_1.it)('should track statistics', () => {
        batcher.add({ peerId: 'peer1', data: new Uint8Array([1]) });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([2]) });
        batcher.add({ peerId: 'peer1', data: new Uint8Array([3]) });
        const stats = batcher.stats;
        (0, globals_1.expect)(stats.messagesBatched).toBe(3);
        (0, globals_1.expect)(stats.batchesSent).toBe(1);
        (0, globals_1.expect)(stats.avgBatchSize).toBe(3);
    });
});
(0, globals_1.describe)('BloomFilter', () => {
    let filter;
    (0, globals_1.beforeEach)(() => {
        filter = new performance_optimizations_js_1.BloomFilter(1000, 0.01);
    });
    (0, globals_1.it)('should add and check elements', () => {
        filter.add('hello');
        filter.add('world');
        (0, globals_1.expect)(filter.mightContain('hello')).toBe(true);
        (0, globals_1.expect)(filter.mightContain('world')).toBe(true);
    });
    (0, globals_1.it)('should return false for elements not added', () => {
        filter.add('hello');
        // This should almost certainly be false
        // (with very small probability of false positive)
        (0, globals_1.expect)(filter.mightContain('goodbye')).toBe(false);
    });
    (0, globals_1.it)('should work with Uint8Array', () => {
        const data = new Uint8Array([1, 2, 3, 4]);
        filter.add(data);
        (0, globals_1.expect)(filter.mightContain(data)).toBe(true);
        (0, globals_1.expect)(filter.mightContain(new Uint8Array([5, 6, 7, 8]))).toBe(false);
    });
    (0, globals_1.it)('should track count', () => {
        filter.add('a');
        filter.add('b');
        filter.add('c');
        (0, globals_1.expect)(filter.count).toBe(3);
    });
    (0, globals_1.it)('should clear correctly', () => {
        filter.add('hello');
        filter.clear();
        (0, globals_1.expect)(filter.mightContain('hello')).toBe(false);
        (0, globals_1.expect)(filter.count).toBe(0);
    });
    (0, globals_1.it)('should maintain low false positive rate', () => {
        // Add 500 elements
        for (let i = 0; i < 500; i++) {
            filter.add(`element-${i}`);
        }
        // Check 500 elements that were NOT added
        let falsePositives = 0;
        for (let i = 500; i < 1000; i++) {
            if (filter.mightContain(`element-${i}`)) {
                falsePositives++;
            }
        }
        // Should be around 1% (5 out of 500) or less
        (0, globals_1.expect)(falsePositives).toBeLessThan(25); // Allow some margin
    });
});
(0, globals_1.describe)('ConnectionPool', () => {
    let pool;
    let closedConnections;
    (0, globals_1.beforeEach)(() => {
        closedConnections = [];
        pool = new performance_optimizations_js_1.ConnectionPool({
            maxConnections: 3,
            idleTimeoutMs: 100,
            cleanupIntervalMs: 50,
        });
    });
    (0, globals_1.afterEach)(() => {
        pool.destroy();
    });
    (0, globals_1.it)('should create connections', () => {
        const conn = pool.getOrCreate('peer1', () => ({
            peerId: 'peer1',
            lastActivity: Date.now(),
            isActive: true,
            close: () => closedConnections.push('peer1'),
        }));
        (0, globals_1.expect)(conn.peerId).toBe('peer1');
        (0, globals_1.expect)(pool.size).toBe(1);
    });
    (0, globals_1.it)('should return existing connections', () => {
        let createCount = 0;
        const create = () => {
            createCount++;
            return {
                peerId: 'peer1',
                lastActivity: Date.now(),
                isActive: true,
                close: () => { },
            };
        };
        pool.getOrCreate('peer1', create);
        pool.getOrCreate('peer1', create);
        (0, globals_1.expect)(createCount).toBe(1);
    });
    (0, globals_1.it)('should evict when at capacity', () => {
        for (let i = 0; i < 3; i++) {
            pool.getOrCreate(`peer${i}`, () => ({
                peerId: `peer${i}`,
                lastActivity: Date.now() - (3 - i) * 1000, // Older peers first
                isActive: false,
                close: () => closedConnections.push(`peer${i}`),
            }));
        }
        // Add one more - should evict oldest
        pool.getOrCreate('peer3', () => ({
            peerId: 'peer3',
            lastActivity: Date.now(),
            isActive: false,
            close: () => closedConnections.push('peer3'),
        }));
        (0, globals_1.expect)(closedConnections).toContain('peer0');
        (0, globals_1.expect)(pool.size).toBe(3);
    });
    (0, globals_1.it)('should remove connections', () => {
        pool.getOrCreate('peer1', () => ({
            peerId: 'peer1',
            lastActivity: Date.now(),
            isActive: true,
            close: () => closedConnections.push('peer1'),
        }));
        pool.remove('peer1');
        (0, globals_1.expect)(closedConnections).toContain('peer1');
        (0, globals_1.expect)(pool.size).toBe(0);
    });
});
(0, globals_1.describe)('MetricsCollector', () => {
    let collector;
    (0, globals_1.beforeEach)(() => {
        collector = new performance_optimizations_js_1.MetricsCollector();
    });
    (0, globals_1.it)('should track messages', () => {
        collector.recordMessage();
        collector.recordMessage();
        collector.recordMessage();
        const metrics = collector.getMetrics();
        // Can't precisely test messagesPerSecond due to timing
        (0, globals_1.expect)(metrics.messagesPerSecond).toBeGreaterThanOrEqual(0);
    });
    (0, globals_1.it)('should calculate average latency', () => {
        collector.recordLatency(10);
        collector.recordLatency(20);
        collector.recordLatency(30);
        const metrics = collector.getMetrics();
        (0, globals_1.expect)(metrics.averageLatencyMs).toBe(20);
    });
    (0, globals_1.it)('should track peak connections', () => {
        collector.recordConnections(5);
        collector.recordConnections(10);
        collector.recordConnections(3);
        const metrics = collector.getMetrics();
        (0, globals_1.expect)(metrics.peakConnections).toBe(10);
    });
    (0, globals_1.it)('should reset correctly', () => {
        collector.recordMessage();
        collector.recordLatency(100);
        collector.recordConnections(50);
        collector.reset();
        const metrics = collector.getMetrics();
        (0, globals_1.expect)(metrics.averageLatencyMs).toBe(0);
        (0, globals_1.expect)(metrics.peakConnections).toBe(0);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2NocmlzdHltYXh3ZWxsL0Rlc2t0b3AvTHVrZV9TdHVmZi9HaXRIdWIvU0MvY29yZS9zcmMvcGVyZm9ybWFuY2Utb3B0aW1pemF0aW9ucy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCwyQ0FBNEU7QUFDNUUsaUZBUXdDO0FBRXhDLElBQUEsa0JBQVEsRUFBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO0lBQ3hCLElBQUksS0FBK0IsQ0FBQztJQUVwQyxJQUFBLG9CQUFVLEVBQUMsR0FBRyxFQUFFO1FBQ2QsS0FBSyxHQUFHLElBQUksdUNBQVEsQ0FBaUIsQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLFlBQUUsRUFBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7UUFDMUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFbEIsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLFlBQUUsRUFBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDbEQsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMvQyxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsWUFBRSxFQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtRQUN6RCxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNsQixLQUFL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QSxnQkFBTSxFQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxJQUFBLGdCQUFNLEVBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3R5bWF4d2VsbC9EZXNrdG9wL0x1a2VfU3R1ZmYvR2l0SHViL1NDL2NvcmUvc3JjL3BlcmZvcm1hbmNlLW9wdGltaXphdGlvbnMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3RzIGZvciBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25zXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHtcbiAgTFJVQ2FjaGUsXG4gIEJ1ZmZlclBvb2wsXG4gIE1lc3NhZ2VCYXRjaGVyLFxuICBCbG9vbUZpbHRlcixcbiAgQ29ubmVjdGlvblBvb2wsXG4gIE1ldHJpY3NDb2xsZWN0b3IsXG4gIEJhdGNoSXRlbSxcbn0gZnJvbSAnLi9wZXJmb3JtYW5jZS1vcHRpbWl6YXRpb25zLmpzJztcblxuZGVzY3JpYmUoJ0xSVUNhY2hlJywgKCkgPT4ge1xuICBsZXQgY2FjaGU6IExSVUNhY2hlPHN0cmluZywgbnVtYmVyPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBjYWNoZSA9IG5ldyBMUlVDYWNoZTxzdHJpbmcsIG51bWJlcj4oMyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgYW5kIHJldHJpZXZlIHZhbHVlcycsICgpID0+IHtcbiAgICBjYWNoZS5zZXQoJ2EnLCAxKTtcbiAgICBjYWNoZS5zZXQoJ2InLCAyKTtcblxuICAgIGV4cGVjdChjYWNoZS5nZXQoJ2EnKSkudG9CZSgxKTtcbiAgICBleHBlY3QoY2FjaGUuZ2V0KCdiJykpLnRvQmUoMik7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCBmb3IgbWlzc2luZyBrZXlzJywgKCkgPT4ge1xuICAgIGV4cGVjdChjYWNoZS5nZXQoJ21pc3NpbmcnKSkudG9CZVVuZGVmaW5lZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGV2aWN0IGxlYXN0IHJlY2VudGx5IHVzZWQgaXRlbSB3aGVuIGZ1bGwnLCAoKSA9PiB7XG4gICAgY2FjaGUuc2V0KCdhJywgMSk7XG4gICAgY2FjaGUuc2V0KCdiJywgMik7XG4gICAgY2FjaGUuc2V0KCdjJywgMyk7XG5cbiAgICAvLyBBY2Nlc3MgJ2EnIHRvIG1ha2UgaXQgcmVjZW50bHkgdXNlZFxuICAgIGNhY2hlLmdldCgnYScpO1xuXG4gICAgLy8gQWRkICdkJyAtIHNob3VsZCBldmljdCAnYicgKGxlYXN0IHJlY2VudGx5IHVzZWQpXG4gICAgY2FjaGUuc2V0KCdkJywgNCk7XG5cbiAgICBleHBlY3QoY2FjaGUuZ2V0KCdhJykpLnRvQmUoMSk7IC8vIFN0aWxsIHRoZXJlXG4gICAgZXhwZWN0KGNhY2hlLmdldCgnYicpKS50b0JlVW5kZWZpbmVkKCk7IC8vIEV2aWN0ZWRcbiAgICBleHBlY3QoY2FjaGUuZ2V0KCdjJykpLnRvQmUoMyk7IC8vIFN0aWxsIHRoZXJlXG4gICAgZXhwZWN0KGNhY2hlLmdldCgnZCcpKS50b0JlKDQpOyAvLyBOZXcgaXRlbVxuICB9KTtcblxuICBpdCgnc2hvdWxkIHVwZGF0ZSBleGlzdGluZyBrZXlzIHdpdGhvdXQgZXZpY3Rpb24nLCAoKSA9PiB7XG4gICAgY2FjaGUuc2V0KCdhJywgMSk7XG4gICAgY2FjaGUuc2V0KCdiJywgMik7XG4gICAgY2FjaGUuc2V0KCdjJywgMyk7XG4gICAgY2FjaGUuc2V0KCdhJywgMTApOyAvLyBVcGRhdGUgZXhpc3RpbmdcblxuICAgIGV4cGVjdChjYWNoZS5nZXQoJ2EnKSkudG9CZSgxMCk7XG4gICAgZXhwZWN0KGNhY2hlLnNpemUpLnRvQmUoMyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgaGl0IHJhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNhY2hlLnNldCgnYScsIDEpO1xuXG4gICAgY2FjaGUuZ2V0KCdhJyk7IC8vIGhpdFxuICAgIGNhY2hlLmdldCgnYScpOyAvLyBoaXRcbiAgICBjYWNoZS5nZXQoJ21pc3NpbmcnKTsgLy8gbWlzc1xuXG4gICAgZXhwZWN0KGNhY2hlLnN0YXRzLmhpdHMpLnRvQmUoMik7XG4gICAgZXhwZWN0KGNhY2hlLnN0YXRzLm1pc3NlcykudG9CZSgxKTtcbiAgICBleHBlY3QoY2FjaGUuaGl0UmF0ZSkudG9CZUNsb3NlVG8oMC42NjcsIDIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRlbGV0ZSBpdGVtcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY2FjaGUuc2V0KCdhJywgMSk7XG4gICAgZXhwZWN0KGNhY2hlLmRlbGV0ZSgnYScpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChjYWNoZS5nZXQoJ2EnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIGV4cGVjdChjYWNoZS5kZWxldGUoJ2EnKSkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2xlYXIgYWxsIGl0ZW1zJywgKCkgPT4ge1xuICAgIGNhY2hlLnNldCgnYScsIDEpO1xuICAgIGNhY2hlLnNldCgnYicsIDIpO1xuICAgIGNhY2hlLmNsZWFyKCk7XG5cbiAgICBleHBlY3QoY2FjaGUuc2l6ZSkudG9CZSgwKTtcbiAgICBleHBlY3QoY2FjaGUuZ2V0KCdhJykpLnRvQmVVbmRlZmluZWQoKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0J1ZmZlclBvb2wnLCAoKSA9PiB7XG4gIGxldCBwb29sOiBCdWZmZXJQb29sO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHBvb2wgPSBuZXcgQnVmZmVyUG9vbCgxMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYWNxdWlyZSBidWZmZXJzIG9mIHJlcXVlc3RlZCBzaXplJywgKCkgPT4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHBvb2wuYWNxdWlyZSgxMDApO1xuICAgIGV4cGVjdChidWZmZXIubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEwMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm9ybWFsaXplIGJ1ZmZlciBzaXplcycsICgpID0+IHtcbiAgICBjb25zdCBidWZmZXIxID0gcG9vbC5hY3F1aXJlKDUwKTsgLy8gU2hvdWxkIGdldCA2NFxuICAgIGNvbnN0IGJ1ZmZlcjIgPSBwb29sLmFjcXVpcmUoMTAwKTsgLy8gU2hvdWxkIGdldCAxMjhcblxuICAgIGV4cGVjdChidWZmZXIxLmxlbmd0aCkudG9CZSg2NCk7XG4gICAgZXhwZWN0KGJ1ZmZlcjIubGVuZ3RoKS50b0JlKDEyOCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV1c2UgcmVsZWFzZWQgYnVmZmVycycsICgpID0+IHtcbiAgICBjb25zdCBidWZmZXIxID0gcG9vbC5hY3F1aXJlKDY0KTtcbiAgICBwb29sLnJlbGVhc2UoYnVmZmVyMSk7XG5cbiAgICBjb25zdCBidWZmZXIyID0gcG9vbC5hY3F1aXJlKDY0KTtcbiAgICBleHBlY3QoYnVmZmVyMikudG9CZShidWZmZXIxKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjbGVhciBidWZmZXJzIG9uIHJlbGVhc2UgZm9yIHNlY3VyaXR5JywgKCkgPT4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHBvb2wuYWNxdWlyZSg2NCk7XG4gICAgYnVmZmVyWzBdID0gNDI7XG4gICAgcG9vbC5yZWxlYXNlKGJ1ZmZlcik7XG5cbiAgICBjb25zdCByZXVzZWQgPSBwb29sLmFjcXVpcmUoNjQpO1xuICAgIGV4cGVjdChyZXVzZWRbMF0pLnRvQmUoMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcHJvdmlkZSB3aXRoQnVmZmVyIGhlbHBlcicsICgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBwb29sLndpdGhCdWZmZXIoMTAwLCAoYnVmZmVyKSA9PiB7XG4gICAgICBidWZmZXJbMF0gPSAxO1xuICAgICAgcmV0dXJuIGJ1ZmZlci5sZW5ndGg7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEwMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgc3RhdGlzdGljcycsICgpID0+IHtcbiAgICBwb29sLmFjcXVpcmUoNjQpO1xuICAgIHBvb2wuYWNxdWlyZSg2NCk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHBvb2wuc3RhdHM7XG4gICAgZXhwZWN0KHN0YXRzLmFjcXVpcmVkKS50b0JlKDIpO1xuICAgIGV4cGVjdChzdGF0cy5jcmVhdGVkKS50b0JlKDIpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTWVzc2FnZUJhdGNoZXInLCAoKSA9PiB7XG4gIGxldCBiYXRjaGVyOiBNZXNzYWdlQmF0Y2hlcjtcbiAgbGV0IGJhdGNoZXM6IEJhdGNoSXRlbVtdW107XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYmF0Y2hlcyA9IFtdO1xuICAgIGJhdGNoZXIgPSBuZXcgTWVzc2FnZUJhdGNoZXIoe1xuICAgICAgbWF4QmF0Y2hTaXplOiAzLFxuICAgICAgbWF4V2FpdE1zOiAxMDAsXG4gICAgICBvbkJhdGNoOiAoaXRlbXMpID0+IHtcbiAgICAgICAgYmF0Y2hlcy5wdXNoKGl0ZW1zKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgYmF0Y2hlci5kZXN0cm95KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYmF0Y2ggbWVzc2FnZXMgYnkgcGVlcicsICgpID0+IHtcbiAgICBiYXRjaGVyLmFkZCh7IHBlZXJJZDogJ3BlZXIxJywgZGF0YTogbmV3IFVpbnQ4QXJyYXkoWzFdKSB9KTtcbiAgICBiYXRjaGVyLmFkZCh7IHBlZXJJZDogJ3BlZXIxJywgZGF0YTogbmV3IFVpbnQ4QXJyYXkoWzJdKSB9KTtcbiAgICBiYXRjaGVyLmFkZCh7IHBlZXJJZDogJ3BlZXIxJywgZGF0YTogbmV3IFVpbnQ4QXJyYXkoWzNdKSB9KTtcblxuICAgIC8vIFNob3VsZCBmbHVzaCBhZnRlciByZWFjaGluZyBtYXhCYXRjaFNpemVcbiAgICBleHBlY3QoYmF0Y2hlcy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgZXhwZWN0KGJhdGNoZXNbMF0ubGVuZ3RoKS50b0JlKDMpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGtlZXAgc2VwYXJhdGUgcXVldWVzIHBlciBwZWVyJywgKCkgPT4ge1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjEnLCBkYXRhOiBuZXcgVWludDhBcnJheShbMV0pIH0pO1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjInLCBkYXRhOiBuZXcgVWludDhBcnJheShbMl0pIH0pO1xuXG4gICAgYmF0Y2hlci5mbHVzaEFsbCgpO1xuXG4gICAgZXhwZWN0KGJhdGNoZXMubGVuZ3RoKS50b0JlKDIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNvcnQgYnkgcHJpb3JpdHknLCAoKSA9PiB7XG4gICAgYmF0Y2hlci5hZGQoeyBwZWVySWQ6ICdwZWVyMScsIGRhdGE6IG5ldyBVaW50OEFycmF5KFsxXSksIHByaW9yaXR5OiAxIH0pO1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjEnLCBkYXRhOiBuZXcgVWludDhBcnJheShbMl0pLCBwcmlvcml0eTogMTAgfSk7XG4gICAgYmF0Y2hlci5hZGQoeyBwZWVySWQ6ICdwZWVyMScsIGRhdGE6IG5ldyBVaW50OEFycmF5KFszXSksIHByaW9yaXR5OiA1IH0pO1xuXG4gICAgZXhwZWN0KChiYXRjaGVzWzBdWzBdIGFzIEJhdGNoSXRlbSkucHJpb3JpdHkpLnRvQmUoMTApOyAvLyBIaWdoZXN0IHByaW9yaXR5IGZpcnN0XG4gICAgZXhwZWN0KChiYXRjaGVzWzBdWzFdIGFzIEJhdGNoSXRlbSkucHJpb3JpdHkpLnRvQmUoNSk7XG4gICAgZXhwZWN0KChiYXRjaGVzWzBdWzJdIGFzIEJhdGNoSXRlbSkucHJpb3JpdHkpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZmx1c2ggb24gdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICBiYXRjaGVyLmFkZCh7IHBlZXJJZDogJ3BlZXIxJywgZGF0YTogbmV3IFVpbnQ4QXJyYXkoWzFdKSB9KTtcblxuICAgIC8vIFdhaXQgZm9yIHRpbWVvdXRcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNTApKTtcblxuICAgIGV4cGVjdChiYXRjaGVzLmxlbmd0aCkudG9CZSgxKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB0cmFjayBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjEnLCBkYXRhOiBuZXcgVWludDhBcnJheShbMV0pIH0pO1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjEnLCBkYXRhOiBuZXcgVWludDhBcnJheShbMl0pIH0pO1xuICAgIGJhdGNoZXIuYWRkKHsgcGVlcklkOiAncGVlcjEnLCBkYXRhOiBuZXcgVWludDhBcnJheShbM10pIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBiYXRjaGVyLnN0YXRzO1xuICAgIGV4cGVjdChzdGF0cy5tZXNzYWdlc0JhdGNoZWQpLnRvQmUoMyk7XG4gICAgZXhwZWN0KHN0YXRzLmJhdGNoZXNTZW50KS50b0JlKDEpO1xuICAgIGV4cGVjdChzdGF0cy5hdmdCYXRjaFNpemUpLnRvQmUoMyk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdCbG9vbUZpbHRlcicsICgpID0+IHtcbiAgbGV0IGZpbHRlcjogQmxvb21GaWx0ZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZmlsdGVyID0gbmV3IEJsb29tRmlsdGVyKDEwMDAsIDAuMDEpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGFkZCBhbmQgY2hlY2sgZWxlbWVudHMnLCAoKSA9PiB7XG4gICAgZmlsdGVyLmFkZCgnaGVsbG8nKTtcbiAgICBmaWx0ZXIuYWRkKCd3b3JsZCcpO1xuXG4gICAgZXhwZWN0KGZpbHRlci5taWdodENvbnRhaW4oJ2hlbGxvJykpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGZpbHRlci5taWdodENvbnRhaW4oJ3dvcmxkJykpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBlbGVtZW50cyBub3QgYWRkZWQnLCAoKSA9PiB7XG4gICAgZmlsdGVyLmFkZCgnaGVsbG8nKTtcblxuICAgIC8vIFRoaXMgc2hvdWxkIGFsbW9zdCBjZXJ0YWlubHkgYmUgZmFsc2VcbiAgICAvLyAod2l0aCB2ZXJ5IHNtYWxsIHByb2JhYmlsaXR5IG9mIGZhbHNlIHBvc2l0aXZlKVxuICAgIGV4cGVjdChmaWx0ZXIubWlnaHRDb250YWluKCdnb29kYnllJykpLnRvQmUoZmFsc2UpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBVaW50OEFycmF5JywgKCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShbMSwgMiwgMywgNF0pO1xuICAgIGZpbHRlci5hZGQoZGF0YSk7XG5cbiAgICBleHBlY3QoZmlsdGVyLm1pZ2h0Q29udGFpbihkYXRhKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoZmlsdGVyLm1pZ2h0Q29udGFpbihuZXcgVWludDhBcnJheShbNSwgNiwgNywgOF0pKSkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgY291bnQnLCAoKSA9PiB7XG4gICAgZmlsdGVyLmFkZCgnYScpO1xuICAgIGZpbHRlci5hZGQoJ2InKTtcbiAgICBmaWx0ZXIuYWRkKCdjJyk7XG5cbiAgICBleHBlY3QoZmlsdGVyLmNvdW50KS50b0JlKDMpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNsZWFyIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBmaWx0ZXIuYWRkKCdoZWxsbycpO1xuICAgIGZpbHRlci5jbGVhcigpO1xuXG4gICAgZXhwZWN0KGZpbHRlci5taWdodENvbnRhaW4oJ2hlbGxvJykpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChmaWx0ZXIuY291bnQpLnRvQmUoMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFpbnRhaW4gbG93IGZhbHNlIHBvc2l0aXZlIHJhdGUnLCAoKSA9PiB7XG4gICAgLy8gQWRkIDUwMCBlbGVtZW50c1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgIGZpbHRlci5hZGQoYGVsZW1lbnQtJHtpfWApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIDUwMCBlbGVtZW50cyB0aGF0IHdlcmUgTk9UIGFkZGVkXG4gICAgbGV0IGZhbHNlUG9zaXRpdmVzID0gMDtcbiAgICBmb3IgKGxldCBpID0gNTAwOyBpIDwgMTAwMDsgaSsrKSB7XG4gICAgICBpZiAoZmlsdGVyLm1pZ2h0Q29udGFpbihgZWxlbWVudC0ke2l9YCkpIHtcbiAgICAgICAgZmFsc2VQb3NpdGl2ZXMrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaG91bGQgYmUgYXJvdW5kIDElICg1IG91dCBvZiA1MDApIG9yIGxlc3NcbiAgICBleHBlY3QoZmFsc2VQb3NpdGl2ZXMpLnRvQmVMZXNzVGhhbigyNSk7IC8vIEFsbG93IHNvbWUgbWFyZ2luXG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdDb25uZWN0aW9uUG9vbCcsICgpID0+IHtcbiAgbGV0IHBvb2w6IENvbm5lY3Rpb25Qb29sO1xuICBsZXQgY2xvc2VkQ29ubmVjdGlvbnM6IHN0cmluZ1tdO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNsb3NlZENvbm5lY3Rpb25zID0gW107XG4gICAgcG9vbCA9IG5ldyBDb25uZWN0aW9uUG9vbCh7XG4gICAgICBtYXhDb25uZWN0aW9uczogMyxcbiAgICAgIGlkbGVUaW1lb3V0TXM6IDEwMCxcbiAgICAgIGNsZWFudXBJbnRlcnZhbE1zOiA1MCxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBwb29sLmRlc3Ryb3koKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjcmVhdGUgY29ubmVjdGlvbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgY29ubiA9IHBvb2wuZ2V0T3JDcmVhdGUoJ3BlZXIxJywgKCkgPT4gKHtcbiAgICAgIHBlZXJJZDogJ3BlZXIxJyxcbiAgICAgIGxhc3RBY3Rpdml0eTogRGF0ZS5ub3coKSxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgY2xvc2U6ICgpID0+IGNsb3NlZENvbm5lY3Rpb25zLnB1c2goJ3BlZXIxJyksXG4gICAgfSkpO1xuXG4gICAgZXhwZWN0KGNvbm4ucGVlcklkKS50b0JlKCdwZWVyMScpO1xuICAgIGV4cGVjdChwb29sLnNpemUpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIGV4aXN0aW5nIGNvbm5lY3Rpb25zJywgKCkgPT4ge1xuICAgIGxldCBjcmVhdGVDb3VudCA9IDA7XG5cbiAgICBjb25zdCBjcmVhdGUgPSAoKSA9PiB7XG4gICAgICBjcmVhdGVDb3VudCsrO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGVlcklkOiAncGVlcjEnLFxuICAgICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KCksXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBjbG9zZTogKCkgPT4ge30sXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBwb29sLmdldE9yQ3JlYXRlKCdwZWVyMScsIGNyZWF0ZSk7XG4gICAgcG9vbC5nZXRPckNyZWF0ZSgncGVlcjEnLCBjcmVhdGUpO1xuXG4gICAgZXhwZWN0KGNyZWF0ZUNvdW50KS50b0JlKDEpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGV2aWN0IHdoZW4gYXQgY2FwYWNpdHknLCAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIHBvb2wuZ2V0T3JDcmVhdGUoYHBlZXIke2l9YCwgKCkgPT4gKHtcbiAgICAgICAgcGVlcklkOiBgcGVlciR7aX1gLFxuICAgICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KCkgLSAoMyAtIGkpICogMTAwMCwgLy8gT2xkZXIgcGVlcnMgZmlyc3RcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBjbG9zZTogKCkgPT4gY2xvc2VkQ29ubmVjdGlvbnMucHVzaChgcGVlciR7aX1gKSxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgb25lIG1vcmUgLSBzaG91bGQgZXZpY3Qgb2xkZXN0XG4gICAgcG9vbC5nZXRPckNyZWF0ZSgncGVlcjMnLCAoKSA9PiAoe1xuICAgICAgcGVlcklkOiAncGVlcjMnLFxuICAgICAgbGFzdEFjdGl2aXR5OiBEYXRlLm5vdygpLFxuICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgY2xvc2U6ICgpID0+IGNsb3NlZENvbm5lY3Rpb25zLnB1c2goJ3BlZXIzJyksXG4gICAgfSkpO1xuXG4gICAgZXhwZWN0KGNsb3NlZENvbm5lY3Rpb25zKS50b0NvbnRhaW4oJ3BlZXIwJyk7XG4gICAgZXhwZWN0KHBvb2wuc2l6ZSkudG9CZSgzKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZW1vdmUgY29ubmVjdGlvbnMnLCAoKSA9PiB7XG4gICAgcG9vbC5nZXRPckNyZWF0ZSgncGVlcjEnLCAoKSA9PiAoe1xuICAgICAgcGVlcklkOiAncGVlcjEnLFxuICAgICAgbGFzdEFjdGl2aXR5OiBEYXRlLm5vdygpLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjbG9zZTogKCkgPT4gY2xvc2VkQ29ubmVjdGlvbnMucHVzaCgncGVlcjEnKSxcbiAgICB9KSk7XG5cbiAgICBwb29sLnJlbW92ZSgncGVlcjEnKTtcblxuICAgIGV4cGVjdChjbG9zZWRDb25uZWN0aW9ucykudG9Db250YWluKCdwZWVyMScpO1xuICAgIGV4cGVjdChwb29sLnNpemUpLnRvQmUoMCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdNZXRyaWNzQ29sbGVjdG9yJywgKCkgPT4ge1xuICBsZXQgY29sbGVjdG9yOiBNZXRyaWNzQ29sbGVjdG9yO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNvbGxlY3RvciA9IG5ldyBNZXRyaWNzQ29sbGVjdG9yKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgY29sbGVjdG9yLnJlY29yZE1lc3NhZ2UoKTtcbiAgICBjb2xsZWN0b3IucmVjb3JkTWVzc2FnZSgpO1xuICAgIGNvbGxlY3Rvci5yZWNvcmRNZXNzYWdlKCk7XG5cbiAgICBjb25zdCBtZXRyaWNzID0gY29sbGVjdG9yLmdldE1ldHJpY3MoKTtcbiAgICAvLyBDYW4ndCBwcmVjaXNlbHkgdGVzdCBtZXNzYWdlc1BlclNlY29uZCBkdWUgdG8gdGltaW5nXG4gICAgZXhwZWN0KG1ldHJpY3MubWVzc2FnZXNQZXJTZWNvbmQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2FsY3VsYXRlIGF2ZXJhZ2UgbGF0ZW5jeScsICgpID0+IHtcbiAgICBjb2xsZWN0b3IucmVjb3JkTGF0ZW5jeSgxMCk7XG4gICAgY29sbGVjdG9yLnJlY29yZExhdGVuY3koMjApO1xuICAgIGNvbGxlY3Rvci5yZWNvcmRMYXRlbmN5KDMwKTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBjb2xsZWN0b3IuZ2V0TWV0cmljcygpO1xuICAgIGV4cGVjdChtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5TXMpLnRvQmUoMjApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRyYWNrIHBlYWsgY29ubmVjdGlvbnMnLCAoKSA9PiB7XG4gICAgY29sbGVjdG9yLnJlY29yZENvbm5lY3Rpb25zKDUpO1xuICAgIGNvbGxlY3Rvci5yZWNvcmRDb25uZWN0aW9ucygxMCk7XG4gICAgY29sbGVjdG9yLnJlY29yZENvbm5lY3Rpb25zKDMpO1xuXG4gICAgY29uc3QgbWV0cmljcyA9IGNvbGxlY3Rvci5nZXRNZXRyaWNzKCk7XG4gICAgZXhwZWN0KG1ldHJpY3MucGVha0Nvbm5lY3Rpb25zKS50b0JlKDEwKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXNldCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29sbGVjdG9yLnJlY29yZE1lc3NhZ2UoKTtcbiAgICBjb2xsZWN0b3IucmVjb3JkTGF0ZW5jeSgxMDApO1xuICAgIGNvbGxlY3Rvci5yZWNvcmRDb25uZWN0aW9ucyg1MCk7XG5cbiAgICBjb2xsZWN0b3IucmVzZXQoKTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBjb2xsZWN0b3IuZ2V0TWV0cmljcygpO1xuICAgIGV4cGVjdChtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5TXMpLnRvQmUoMCk7XG4gICAgZXhwZWN0KG1ldHJpY3MucGVha0Nvbm5lY3Rpb25zKS50b0JlKDApO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9